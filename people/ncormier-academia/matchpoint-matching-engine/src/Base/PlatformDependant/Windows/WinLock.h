/******************************************************************************
 ******************************************************************************
 * Copyright (c) 2007 MatchPoint, All rights reserved
 *
 * File    :    WinLock.h
 * Desc    :    Lock declaration for windows
 * Author  :    nico
 *****************************************************************************/

#ifndef __WIN_LOCK_H__
# define __WIN_LOCK_H__

/*****************************************************************************/
/* Header files                                                              */
/*****************************************************************************/
# ifdef WIN32
#  ifndef _WIN32_WINNT
#   define _WIN32_WINNT 0x400
#  endif /* _WIN32_WINNT */
# endif /* WIN32 */
# include <windows.h>
# include "Lock.h"
/*****************************************************************************/
/* Default namespace                                                         */
/*****************************************************************************/
# include "DefaultNamespace.h"
DNSPACE_OPEN
/*****************************************************************************/
/* Types Definition                                                          */
/*****************************************************************************/
class WinLock : public Lock
{
  /***************************************************************************/
  /* Methods                                                                 */
  /***************************************************************************/
public:
                    WinLock(void);
  virtual          ~WinLock(void);
  bool              TryRetain(void);
  void              Retain(void);
  void              Release(void);
  /***************************************************************************/
  /* Properties                                                              */
  /***************************************************************************/
private:
  CRITICAL_SECTION  m_crit;
};
/*****************************************************************************/
/* Default namespace close                                                   */
/*****************************************************************************/
DNSPACE_CLOSE


#endif /* __FACTORY_H__ */
