<!DOCTYPE html>
<!--[if IE 8]>
<html id="ie8" lang="en">
<![endif]-->
<!--[if !(IE 8)]><!-->
<html lang="en">
<!--<![endif]-->
<!--
	generated 223 seconds ago
	generated in 0.767 seconds
	served from batcache in 0.005 seconds
	expires in 77 seconds
-->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>Expect Scripting For Network Engineers (Cisco) &laquo; Paul Gerard Porter</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="http://paulgporter.net/xmlrpc.php" />
<!--[if lt IE 9]>
<script src="http://s0.wp.com/wp-content/themes/premium/newsy/js/html5.js?m=1370533686g" type="text/javascript"></script>
<![endif]-->

<meta name="google-site-verification" content="FFFtoF-P-_LskM17lY24Kvpf1wd1n_T51WCjMxFy-Pc" />
<meta name="msvalidate.01" content="EB65A08AAAC5441E8003260AE6EB3128" />
		<script src='//r-login.wordpress.com/remote-login.php?action=js&amp;host=paulgporter.net&amp;id=43635418&amp;t=1417423018&amp;back=http%3A%2F%2Fpaulgporter.net%2F2012%2F12%2F08%2F30%2F' type="text/javascript"></script>
		<script type="text/javascript">
		/* <![CDATA[ */
			if ( 'function' === typeof WPRemoteLogin ) {
				document.cookie = "wordpress_test_cookie=test; path=/";
				if ( document.cookie.match( /(;|^)\s*wordpress_test_cookie\=/ ) ) {
					WPRemoteLogin();
				}
			}
		/* ]]> */
		</script>
		<link rel="alternate" type="application/rss+xml" title="Paul Gerard Porter &raquo; Feed" href="http://paulgporter.net/feed/" />
<link rel="alternate" type="application/rss+xml" title="Paul Gerard Porter &raquo; Comments Feed" href="http://paulgporter.net/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Paul Gerard Porter &raquo; Expect Scripting For Network Engineers&nbsp;(Cisco) Comments Feed" href="http://paulgporter.net/2012/12/08/30/feed/" />
<script type="text/javascript">
/* <![CDATA[ */
function addLoadEvent(func){var oldonload=window.onload;if(typeof window.onload!='function'){window.onload=func;}else{window.onload=function(){oldonload();func();}}}
/* ]]> */
</script>
<link rel='stylesheet' id='all-css-0' href='http://s1.wp.com/_static/??-eJx9jtEKwjAMRX/IGoZub+K31DbWdklT1pbi39sNREQZeckN55ALLSkjsWAswFUlqs7HDJk94TMtEtCU73Q0OR/gv0Z+xgwBS9JmVlv6wW8k7iOIc2ilFnUXImnQvHW4+8PIgv3OSZeVYLReIyF3bE/jNL2tdX30glu3K1+G8zBOfcZTeAE3U2U1' type='text/css' media='all' />
<link rel='stylesheet' id='merriweather-css'  href='http://fonts.googleapis.com/css?family=Merriweather%3A400%2C700&#038;ver=20120821' type='text/css' media='all' />
<link rel='stylesheet' id='all-css-2' href='http://s2.wp.com/_static/??-eJx9kNEKgzAMRX9oXXDI5h7GvqVqVittU5qK+PerVMTh6Et7Q+7hJoHZi45cRBchDmiRwQe0erLgcOYFOC4Grx3zBQ5WOwlvJqUdA1oadX6zTYOjqJOTd1HiFZIw1Mmoyf0U4mOkDiU0YGtIJakguQ7lCVobOzZT6GWfkg210pQCPHHMYwAPMqxB21/eyGHIB/grT+x2+KE+jPS2r6qu7k3zbG6P8QsAK563' type='text/css' media='all' />
<link rel='stylesheet' id='print-css-2' href='http://s0.wp.com/wp-content/mu-plugins/global-print/global-print.css?m=1387483371g' type='text/css' media='print' />
<script type='text/javascript'>
/* <![CDATA[ */
var LoggedOutFollow = {"invalid_email":"Your subscription did not succeed, please try again with a valid email address."};
/* ]]> */
</script>
<script type='text/javascript' src='http://s1.wp.com/_static/??-eJyFjd0KwjAMRl/IrttQ8EZ8lv1kJbVtapOu6NNbQUFR2FVCcr7v6BLVREEgiLasPY3oQGWGNJh6UxgWaizvdOUwTC7PwE/QXjOk22tsAsqjSYNA4zG84Q9rJBYPzFX55/utwrAilE3MgsRhuqgEjPef1tGRUdFlg4F13Q3MlEUt5BwVXXA2IDVz9qdu37aHY9e3vX0APQlvpA=='></script>
<link rel='stylesheet' id='all-css-0' href='http://s2.wp.com/wp-content/mu-plugins/highlander-comments/style.css?m=1377793621g' type='text/css' media='all' />
<!--[if lt IE 8]>
<link rel='stylesheet' id='highlander-comments-ie7-css'  href='http://s2.wp.com/wp-content/mu-plugins/highlander-comments/style-ie7.css?m=1351637563g&#038;ver=20110606' type='text/css' media='all' />
<![endif]-->
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://paulgporter.wordpress.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://s1.wp.com/wp-includes/wlwmanifest.xml" /> 
<link rel='next' title='Dress Up Your Cacti&nbsp;Graphs' href='http://paulgporter.net/2012/12/12/enhanced-cacti-graph/' />
<meta name="generator" content="WordPress.com" />
<link rel='canonical' href='http://paulgporter.net/2012/12/08/30/' />
<link rel='shortlink' href='http://wp.me/p2X5z4-u' />
<link rel="alternate" type="application/json+oembed" href="https://public-api.wordpress.com/oembed/1.0/?format=json&amp;url=http%3A%2F%2Fpaulgporter.net%2F2012%2F12%2F08%2F30%2F&amp;for=wpcom-auto-discovery" /><link rel="alternate" type="application/xml+oembed" href="https://public-api.wordpress.com/oembed/1.0/?format=xml&amp;url=http%3A%2F%2Fpaulgporter.net%2F2012%2F12%2F08%2F30%2F&amp;for=wpcom-auto-discovery" />
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Expect Scripting For Network Engineers (Cisco)" />
<meta property="og:url" content="http://paulgporter.net/2012/12/08/30/" />
<meta property="og:description" content="Have you ever spent a good portion of your day repeatedly logging into all of the network devices in your data center to add the IP address of a new syslog server? Or perhaps removing the local use..." />
<meta property="article:published_time" content="2012-12-08T20:45:01+00:00" />
<meta property="article:modified_time" content="2013-09-23T21:55:35+00:00" />
<meta property="article:author" content="https://www.facebook.com/profile.php?id=1336707071" />
<meta property="og:site_name" content="Paul Gerard Porter" />
<meta property="og:image" content="http://paulgporter.files.wordpress.com/2012/12/terminal-wp.jpg" />
<meta name="twitter:site" content="@paul_g_porter" />
<meta name="twitter:image:src" content="http://paulgporter.files.wordpress.com/2012/12/terminal-wp.jpg?w=640" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content="@paul_g_porter" />
<meta property="article:publisher" content="https://www.facebook.com/WordPresscom" />
<link rel="shortcut icon" type="image/x-icon" href="http://0.gravatar.com/blavatar/c86f549a027d25a46ed8b34efaa8047a?s=16" sizes="16x16" />
<link rel="icon" type="image/x-icon" href="http://0.gravatar.com/blavatar/c86f549a027d25a46ed8b34efaa8047a?s=16" sizes="16x16" />
<link rel="apple-touch-icon-precomposed" href="http://1.gravatar.com/blavatar/940d33c66a855ca3b4035b27ffd1def8?s=114" />
<link rel='openid.server' href='http://paulgporter.wordpress.com/?openidserver=1' />
<link rel='openid.delegate' href='http://paulgporter.wordpress.com/' />
<link rel="search" type="application/opensearchdescription+xml" href="http://paulgporter.net/osd.xml" title="Paul Gerard Porter" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wordpress.com/opensearch.xml" title="WordPress.com" />
		<style type="text/css">
			.recentcomments a {
				display: inline !important;
				padding: 0 !important;
				margin: 0 !important;
			}

			table.recentcommentsavatartop img.avatar, table.recentcommentsavatarend img.avatar {
				border: 0px;
				margin: 0;
			}

			table.recentcommentsavatartop a, table.recentcommentsavatarend a {
				border: 0px !important;
				background-color: transparent !important;
			}

			td.recentcommentsavatarend, td.recentcommentsavatartop {
				padding: 0px 0px 1px 0px;
				margin: 0px;
			}

			td.recentcommentstextend {
				border: none !important;
				padding: 0px 0px 2px 10px;
			}

			.rtl td.recentcommentstextend {
				padding: 0px 10px 2px 0px;
			}

			td.recentcommentstexttop {
				border: none;
				padding: 0px 0px 0px 10px;
			}

			.rtl td.recentcommentstexttop {
				padding: 0px 10px 0px 0px;
			}
		</style>
		<meta name="application-name" content="Paul Gerard Porter" /><meta name="msapplication-window" content="width=device-width;height=device-height" /><meta name="msapplication-tooltip" content="Cisco CCNP and CCSP Certified Network Professional" /><meta name="msapplication-task" content="name=Subscribe;action-uri=http://paulgporter.net/feed/;icon-uri=http://0.gravatar.com/blavatar/c86f549a027d25a46ed8b34efaa8047a?s=16" /><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=http://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico" /><meta name="title" content="Expect Scripting For Network Engineers&nbsp;(Cisco) | Paul Gerard Porter on WordPress.com" />
<meta name="description" content="Have you ever spent a good portion of your day repeatedly logging into all of the network devices in your data center to add the IP address of a new syslog server? Or perhaps removing the local user account of a former peer who jumped ship to greener pastures? As a Network Engineer there have&hellip;" />
<style type="text/css" id="custom-background-css">
body.custom-background { background-color: #ffffff; }
</style>

<script type='text/javascript' src='//partner.googleadservices.com/gampad/google_service.js'>
</script>
<script type='text/javascript'>
if ( typeof GS_googleAddAdSenseService == 'function' ) { GS_googleAddAdSenseService("ca-pub-3443918307802676"); }
if ( typeof GS_googleEnableAllServices == 'function' ) { GS_googleEnableAllServices() };
</script><script type='text/javascript'>
if ( typeof GA_googleAddSlot == 'function' ) { GA_googleAddSlot("ca-pub-3443918307802676", "wpcom_below_post"); }
</script>
<script type='text/javascript'>
if ( typeof GA_googleFetchAds == 'function' ) { GA_googleFetchAds(); }
</script>

<script type="text/javascript">
var wpcom_ads = { bid: 43635418, pt: 'permalink', wa: 0, as: 0, domain: 'paulgporter.net', url: 'http://paulgporter.net/2012/12/08/30/', gid: '', };
</script>
<style type="text/css" id="syntaxhighlighteranchor"></style>
<script type="text/javascript">
	window.google_analytics_uacct = "UA-52447-2";
</script>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-52447-2']);
	_gaq.push(['_setDomainName', 'none']);
	_gaq.push(['_setAllowLinker', true]);
	_gaq.push(['_initData']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
	})();
</script>
</head>

<body class="single single-post postid-30 single-format-standard custom-background mp6 single-author three-columns gecko highlander-enabled highlander-light">
<div id="page" class="hfeed">
	<header id="branding" role="banner">
		<hgroup>
			<h1 id="site-title"><a href="http://paulgporter.net/" title="Paul Gerard Porter" rel="home">Paul Gerard Porter</a></h1>
			<h2 id="site-description">Cisco CCNP and CCSP Certified Network Professional</h2>
		</hgroup>

		<nav id="access" role="navigation">
			<h1 class="assistive-text section-heading">Main menu</h1>
			<div class="skip-link screen-reader-text">
				<a href="#content" title="Skip to content">Skip to content</a>
			</div><!-- .skip-link -->
						<div id="menu-wrapper" class="search-option-yes">
				<div class="menu"><ul><li ><a href="http://paulgporter.net/">Home</a></li><li class="page_item page-item-2"><a href="http://paulgporter.net/about/">About</a></li></ul></div>
<form role="search" method="get" id="searchform" class="searchform" action="http://paulgporter.net/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s" />
					<input type="submit" id="searchsubmit" value="Search" />
				</div>
			</form>			</div><!-- #menu-wrapper -->
		</nav><!-- #access -->
	</header><!-- #branding -->
		<div id="main">
		<div id="primary">
			<div id="content" role="main">

			
				
<article id="post-30" class="post-30 post type-post status-publish format-standard has-post-thumbnail hentry category-scripting tag-bash tag-ccnp tag-cisco tag-expect tag-scripting even">
	<header class="entry-header">
					<div class="entry-thumbnail">
				<img width="400" height="300" src="http://paulgporter.files.wordpress.com/2012/12/terminal-wp.jpg?w=400" class="attachment-post-thumbnail wp-post-image" alt="Image of terminal" />			</div><!-- .entry-thumbnail -->
		
					<div class="entry-time">
				<a href="http://paulgporter.net/2012/12/08/30/" title="8:45 pm" rel="bookmark"><time class="entry-date" datetime="2012-12-08T20:45:01+00:00" pubdate>December 8, 2012</time></a>			</div><!-- .entry-time -->
		
		<h1 class="entry-title">
			
			Expect Scripting For Network Engineers (Cisco)
			
							<sup class="entry-comment-popup-link">
					<a href="http://paulgporter.net/2012/12/08/30/#comments" title="Comment on Expect Scripting For Network Engineers&nbsp;(Cisco)">68</a>				</sup>
					</h1>

					<div class="entry-meta">
				<a href="http://paulgporter.net/category/scripting/" rel="category tag">Scripting</a> &bull; Tags: <a href="http://paulgporter.net/tag/bash/" rel="tag">Bash</a>, <a href="http://paulgporter.net/tag/ccnp/" rel="tag">CCNP</a>, <a href="http://paulgporter.net/tag/cisco/" rel="tag">Cisco</a>, <a href="http://paulgporter.net/tag/expect/" rel="tag">Expect</a>, <a href="http://paulgporter.net/tag/scripting/" rel="tag">Scripting</a>			</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

	<div class="entry-content">
		<p>Have you ever spent a good portion of your day repeatedly logging into all of the network devices in your data center to add the IP address of a new syslog server? Or perhaps removing the local user account of a former peer who jumped ship to greener pastures?<span id="more-30"></span></p>
<p>As a Network Engineer there have undoubtedly been times when you have had to make the same configuration change to a large group of devices. Unless you spent a few years honing your scripting skills as a Systems Administrator in the past, chances are that your idea of &#8220;automating&#8221; the process involved manually logging into devices and pasting the same configuration from a text file over and over.</p>
<p>You know that scripting could help, but who has time to learn to write code when you&#8217;re busy researching connectivity issues? After all you&#8217;re a Network Engineer and not a Developer, right?</p>
<h2>Why Use Expect?</h2>
<p><strong>1. It&#8217;s Easy!</strong></p>
<p style="padding-left:30px;">Expect is a scripting program written in Tcl that was built to automate tasks for other interactive programs, such as Cisco&#8217;s IOS and NX-OS command line interfaces. It&#8217;s rather intuitive to understand at the basic level.</p>
<p style="padding-left:30px;">Once you have a working baseline script, such as the one I am providing below, it&#8217;s fast and easy to modify it for use in any situation where you need to make the same configuration change on multiple devices.</p>
<p><strong>2. It&#8217;s Already Installed</strong></p>
<p style="padding-left:30px;">If you&#8217;re primary workstation is a Mac then there is no installation necessary! Expect is already installed in /usr/bin/expect.</p>
<p><strong>3. Excellent Online Resources Available</strong></p>
<p style="padding-left:30px;">The more you use Expect, the more you&#8217;re going to want to do with it. Luckily you don&#8217;t need to take an online course or buy the O&#8217;Reilly Media book like you would with Python and Perl. You can Google search your way to just about anything.</p>
<h2>Simple Expect Script For Cisco Network Devices</h2>
<p>I&#8217;m sharing a basic Expect script which you can use to make configuration changes to Cisco IOS and NX-OS devices from a Mac. If you want to run it from a Linux server, just update the path from <em>/usr/bin/expect</em> to wherever the program is located locally.</p>
<p>The script simply establishes an SSH session, enters enable mode (if you&#8217;re not already dropped in it), enters configure mode, sends whatever commands you specify, then does a write to memory before exiting and moving onto the next device. You need three files to accomplish this:</p>
<p><strong>device-list.txt</strong></p>
<p>This is simply a text file with IP addresses and/or hostnames of the devices with which you want the script to connect to:</p>
<pre class="brush: plain; light: true; title: ; notranslate" title="">core1.mydomain.com
nexus1a
nexus1b
10.0.0.1</pre>
<p><strong>configure-cisco.sh</strong></p>
<p>This is a bash shell script which you will run to start the entire process. It will prompt for your ssh password and an enable password, and then feed it to the Expect script along with the contents of device_list.txt. I found this more secure then reading the passwords from a file and easier to do in bash than in expect.</p>
<pre class="brush: bash; title: ; notranslate" title="">
 #!/bin/bash
 # Collect the current user's ssh and enable passwords
 echo -n &quot;Enter the SSH password for $(whoami) &quot;
 read -s -e password
 echo -ne '\n'
 echo -n &quot;Enter the Enable password for $(whoami) &quot;
 read -s -e enable
 echo -ne '\n'
# Feed the expect script a device list &amp; the collected passwords
for device in `cat device-list.txt`; do
 ./configure-cisco.exp $device $password $enable ;
 done
</pre>
<p><strong>configure-cisco.exp</strong></p>
<p>This is the expect script that I explained earlier. It has some intelligence built in to gracefully handle ssh connectivity issues and will send results both to the screen and to a file called <em>results.log</em> in your home directory:</p>
<pre class="brush: bash; title: ; notranslate" title="">
#!/usr/bin/expect -f

# Set variables
 set hostname [lindex $argv 0]
 set username $env(USER)
 set password [lindex $argv 1]
 set enablepassword [lindex $argv 2]

# Log results
 log_file -a ~/results.log

# Announce which device we are working on and at what time
 send_user &quot;\n&quot;
 send_user &quot;&gt;&gt;&gt;&gt;&gt;  Working on $hostname @ [exec date] &lt;&lt;&lt;&lt;&lt;\n&quot;
 send_user &quot;\n&quot;

# Don't check keys
 spawn ssh -o StrictHostKeyChecking=no $username\@$hostname

# Allow this script to handle ssh connection issues
 expect {
 timeout { send_user &quot;\nTimeout Exceeded - Check Host\n&quot;; exit 1 }
 eof { send_user &quot;\nSSH Connection To $hostname Failed\n&quot;; exit 1 }
 &quot;*#&quot; {}
 &quot;*assword:&quot; {
 send &quot;$password\n&quot;
 }
 }

# If we're not already in enable mode, get us there
 expect {
 default { send_user &quot;\nEnable Mode Failed - Check Password\n&quot;; exit 1 }
 &quot;*#&quot; {}
 &quot;*&gt;&quot; {
 send &quot;enable\n&quot;
 expect &quot;*assword&quot;
 send &quot;$enablepassword\n&quot;
 expect &quot;*#&quot;
 }
 }

# Let's go to configure mode
 send &quot;conf t\n&quot;
 expect &quot;(config)#&quot;

# Enter your commands here. Examples listed below
 #send &quot;tacacs-server host 10.0.0.5\n&quot;
 #expect &quot;(config)#&quot;
 #send &quot;tacacs-server directed-request\n&quot;
 #expect &quot;(config)#&quot;
 #send &quot;tacacs-server key 7 0000000000000\n&quot;
 #expect &quot;(config)#&quot;
 #send &quot;ntp server 10.0.0.9\n&quot;
 #expect &quot;(config)#&quot;
 #send &quot;ip domain-name yourdomain.com\n&quot;
 #expect &quot;(config)#&quot;

 send &quot;end\n&quot;
 expect &quot;#&quot;
 send &quot;write mem\n&quot;
 expect &quot;#&quot;
 send &quot;exit\n&quot;
 expect &quot;:~\$&quot;
 exit
</pre>
<p>To run the script, create all three files in your Mac home directory, chmod+x the scripts, then run <em>configure-cisco.sh</em>.</p>
<pre style="padding-left:30px;">[12/07/2012 1:45pm @paul-mac-air:~]% ./configure-cisco.sh
 Enter the SSH password for paul
 Enter the Enable password for paul
&gt;  Working on core1.mydomain.com @ Fri Dec  7 13:45:22 PST 2012 &lt;
spawn ssh -o StrictHostKeyChecking=no paul@core1.mydomain.com
...</pre>
<h2>Examples of Simple Enhancements</h2>
<p>The scripts I included above have been stripped down to the bare essentials so that there are fewer lines of code to get started with. It gets the job done, but the more you use the scripts the more you may want to enhance it.</p>
<p>I am by no means an expert in Expect or Bash, but I&#8217;ve spent a little time playing with both to help tailor my scripts to do the things I want. The more you use Expect, the more you may want to tailor it as well. Below are a few very basic examples.</p>
<p><strong>1. Add terminal vt100 to for connecting to Nexus devices</strong></p>
<p>I simply got tired of seeing this line every time I connected to a Nexus device:</p>
<p style="padding-left:30px;">Nexus 5000 Switch<br />
Password:<br />
Bad terminal type: &#8220;xterm-256color&#8221;. Will assume vt100.</p>
<p>You can specify a terminal type of vt100 by adding this line to the <em>configure-cisco.sh</em> script (assuming you don&#8217;t want to do it in your terminal settings):</p>
<pre class="brush: bash; title: ; notranslate" title="">
# Set terminal to vt100 so Nexus devices don't complain
export TERM=vt100
</pre>
<p><strong>2. Save and rotate logs</strong></p>
<p>I like to log all of the input from my script to a single file called &#8220;results.log&#8221; which I can then parse later and/or save for reference. To make sure I don&#8217;t overwrite a previous log file, I added a few lines of code to <em>configure-cisco.sh</em> to copy and rename &#8220;results.log&#8221; to &#8220;results.log.timestamp&#8221;</p>
<pre class="brush: bash; title: ; notranslate" title="">
timestamp=`date +%m%d%H%M`
logdir=~/logs/expect

# This will rotate and append date stamp...
logfile=$logdir/results.log
newlogfile=$logfile.$timestamp
cp $logfile $newlogfile
</pre>
<h2>Summary</h2>
<p>Expect is the perfect tool for easily automating redundant tasks and configuration changes on network equipment. It&#8217;s preloaded on Mac OS X and simple to install on server running the Linux flavor of your choice. You don&#8217;t need to fully dive in to the language in order to take advantage of it&#8217;s time saving capabilities.</p>
<p>// <span style="overflow:hidden;line-height:0;" id="mce_0_start"></span><br />
// ]]&gt;</p>

<div class="wpcnt">
<div class="wpa">
<a class="wpa-about" href="http://wordpress.com/about-these-ads/" rel="nofollow">About these ads</a>
<script type="text/javascript">
		var wpcom_adclk_hovering = false;
		var wpcom_adclk_recorded = false;
		var wpcom_adclk_theme = "Newsy";
		var wpcom_adclk_slot = "wpcom_below_post";
		var wpcom_adclk_network = ( typeof wpcom_adclk_network === "undefined" ) ? "" : wpcom_adclk_network ;

		jQuery(document).ready( function() {
			function wpcom_adclk_hover_yes() { wpcom_adclk_hovering = true; }
			function wpcom_adclk_hover_no() { wpcom_adclk_hovering = false; }
			jQuery(".wpa").click(wpcom_adclk_click);
			jQuery(".wpa iframe").hover( wpcom_adclk_hover_yes, wpcom_adclk_hover_no );
			jQuery(".wpa object").hover( wpcom_adclk_hover_yes, wpcom_adclk_hover_no );

			jQuery(window).blur( function() {
				if ( wpcom_adclk_hovering ) { wpcom_adclk_click(); }
			});
		});

		function wpcom_adclk_impression() {
			var stat_gif = document.location.protocol + "//pixel.wp.com/g.gif?v=wpcom-no-pv";
			stat_gif += "&x_ads_imp_theme=" + wpcom_adclk_theme;
			stat_gif += "&x_ads_imp_placement="+wpcom_adclk_slot;
			stat_gif += "&x_ads_imp_network=" + wpcom_adclk_network;
			stat_gif += "&x_ads_imp_theme_network="+wpcom_adclk_theme+"_"+wpcom_adclk_network;
			new Image().src = stat_gif + "&baba=" + Math.random();
			return true;
		}

		function wpcom_adclk_click() {
			if (wpcom_adclk_recorded) { return true; } // no double counting
			var stat_gif = document.location.protocol + "//pixel.wp.com/g.gif?v=wpcom-no-pv";
			stat_gif += "&x_ads_click_theme=" + wpcom_adclk_theme;
			stat_gif += "&x_ads_click_placement="+wpcom_adclk_slot;
			stat_gif += "&x_ads_click_network=" + wpcom_adclk_network;
			stat_gif += "&x_ads_click_theme_network="+wpcom_adclk_theme+"_"+wpcom_adclk_network;

			new Image().src = stat_gif + "&baba=" + Math.random();
			wpcom_adclk_recorded = true;
			var now=new Date(); var end=now.getTime()+250;
			while(true){now=new Date();if(now.getTime()>end){break;}}
			return true;
		}
	
if ( typeof GA_googleAddAttr == 'function' ) {
GA_googleAddAttr("AdOpt", "1");
GA_googleAddAttr("Origin", "other");
GA_googleAddAttr("LangId", "1");
GA_googleAddAttr("Domain", "paulgporter.net");
GA_googleAddAttr("BlogId", "43635418");
GA_googleAddAttr("PageURL", "http://paulgporter.net/2012/12/08/30/");
GA_googleAddAttr("Autotag", "technology");
GA_googleAddAttr("Tag", "scripting");
GA_googleAddAttr("Tag", "bash");
GA_googleAddAttr("Tag", "ccnp");
GA_googleAddAttr("Tag", "cisco");
GA_googleAddAttr("Tag", "expect");
GA_googleAddAttr("Tag", "scripting");
GA_googleAddAttr("theme_bg", "fff");
GA_googleAddAttr("theme_border", "ddd");
GA_googleAddAttr("theme_text", "666");
GA_googleAddAdSensePageAttr("google_page_url", "http://paulgporter.net/2012/12/08/30/");
GA_googleFillSlot("wpcom_below_post");
}
</script>
</div>
</div>

<script type="text/javascript">
jQuery( window ).load( function() {
    if ( jQuery(".wpa script[src*='virool.com']").length > 0 || jQuery(".wpa script[src*='shareth.ru']").length > 0 || jQuery(".wpa iframe[src*='boomvideo.tv']").length > 0 || jQuery(".wpa iframe[src*='viewablemedia.net']").length > 0 || jQuery(".wpa .sharethrough-placement").length > 0 ) {
        jQuery( '.wpa' ).css( 'width', '400px' );
    }
setTimeout(function(){if(typeof GS_googleAddAdSenseService !== 'function'){new Image().src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom-no-pv&x_noads=adblock&baba="+Math.random()}},100);
} );
</script>

<div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-official sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul><li class="share-twitter"><div class="twitter_button"><iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/tweet_button.html?url=http%3A%2F%2Fwp.me%2Fp2X5z4-u&#038;counturl=http%3A%2F%2Fpaulgporter.net%2F2012%2F12%2F08%2F30%2F&#038;count=horizontal&#038;text=Expect%20Scripting%20For%20Network%20Engineers%20%28Cisco%29%3A&#038;via=paul_g_porter&#038;related=wordpressdotcom" style="width:101px; height:20px;"></iframe></div></li><li class="share-linkedin"><div class="linkedin_button"><script type="in/share" data-url="http://paulgporter.net/2012/12/08/30/" data-counter="right"></script></div></li><li class="share-facebook"><div class="like_button"><iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fpaulgporter.net%2F2012%2F12%2F08%2F30%2F&amp;layout=button_count&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;height=21&amp;locale=en_US&amp;width=90" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:96px; height:21px;" allowTransparency="true"></iframe></div></li><li class="share-email"><a rel="nofollow" class="share-email sd-button" href="http://paulgporter.net/2012/12/08/30/?share=email" title="Click to email this to a friend"><span>Email</span></a></li><li class="share-tumblr"><a target="" href="http://www.tumblr.com/share/link/?url=http%3A%2F%2Fpaulgporter.net%2F2012%2F12%2F08%2F30%2F&name=Expect%20Scripting%20For%20Network%20Engineers%20%28Cisco%29" title="Share on Tumblr" style="display:inline-block; text-indent:-9999px; overflow:hidden; width:62px; height:20px; background:url('//platform.tumblr.com/v1/share_2.png') top left no-repeat transparent;">Share on Tumblr</a></li><li class="share-stumbleupon"><div class="stumbleupon_button"><iframe src="http://www.stumbleupon.com/badge/embed/1/?url=http%3A%2F%2Fpaulgporter.net%2F2012%2F12%2F08%2F30%2F&amp;title=Expect%20Scripting%20For%20Network%20Engineers%20%28Cisco%29" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:74px; height: 18px;" allowTransparency="true"></iframe></div></li><li class="share-google-plus-1"><div class="googleplus1_button"><div class="g-plus" data-action="share" data-annotation="bubble" data-href="http://paulgporter.net/2012/12/08/30/"></div></div></li><li class="share-end"></li></ul></div></div></div><div class='sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded' id='like-post-wrapper-43635418-30-547c28aad14cc' data-src='//widgets.wp.com/likes/#blog_id=43635418&amp;post_id=30&amp;origin=paulgporter.wordpress.com&amp;obj_id=43635418-30-547c28aad14cc' data-name='like-post-frame-43635418-30-547c28aad14cc'><h3 class='sd-title'>Like this:</h3><div class='likes-widget-placeholder post-likes-widget-placeholder' style='height:55px'><span class='button'><span>Like</span></span> <span class="loading">Loading...</span></div><span class='sd-text-color'></span><a class='sd-link-color'></a></div></div>			</div><!-- .entry-content -->

	<footer class="entry-meta">
			</footer><!-- .entry-meta -->
</article><!-- #post-30 -->
					<nav id="nav-below">
		<h1 class="assistive-text section-heading">Post navigation</h1>

	
					<div class="nav-previous">
				&nbsp;
			</div>
		
					<div class="nav-next"><a href="http://paulgporter.net/2012/12/12/enhanced-cacti-graph/" rel="next">Dress Up Your Cacti&nbsp;Graphs <span class="meta-nav"></span></a></div>		
	
	</nav><!-- #nav-below -->
	
					<div id="comments">
	
	
			<h2 id="comments-title">
			68 comments		</h2>

		<ol class="commentlist">
				<li class="comment even thread-even depth-1 highlander-comment" id="li-comment-27">
		<article id="comment-27" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://0.gravatar.com/avatar/ca698d962b1e819c0f785536bffb118c?s=45&#038;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">george</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-27"><time pubdate datetime="2013-02-13T10:55:18+00:00">
					February 13, 2013 at 10:55 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>do you have any book recommendations for expect?</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=27#respond' onclick='return addComment.moveForm( "comment-27", "27", "respond", "30" )' aria-label='Reply to george'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-paulgporter bypostauthor odd alt depth-2 highlander-comment" id="li-comment-28">
		<article id="comment-28" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-28"><time pubdate datetime="2013-02-13T11:21:36+00:00">
					February 13, 2013 at 11:21 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Yes, &#8220;Exploring Expect&#8221; by O&#8217;Reilly Media: <a href="http://shop.oreilly.com/product/9781565920903.do" rel="nofollow">http://shop.oreilly.com/product/9781565920903.do</a></p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=28#respond' onclick='return addComment.moveForm( "comment-28", "28", "respond", "30" )' aria-label='Reply to Paul Gerard Porter'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1 highlander-comment" id="li-comment-38">
		<article id="comment-38" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://i1.wp.com/a0.twimg.com/profile_images/3224341655/d54417defb6175ad81838afa03d0a50d_normal.jpeg?resize=45%2C45' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://twitter.com/jpmuga' rel='external nofollow' class='url'>Muga (@jpmuga)</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-38"><time pubdate datetime="2013-02-18T09:43:33+00:00">
					February 18, 2013 at 9:43 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>I love your blog, keep doing what u r doing.</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=38#respond' onclick='return addComment.moveForm( "comment-38", "38", "respond", "30" )' aria-label='Reply to Muga (@jpmuga)'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-paulgporter bypostauthor odd alt depth-2 highlander-comment" id="li-comment-39">
		<article id="comment-39" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-39"><time pubdate datetime="2013-02-18T18:46:20+00:00">
					February 18, 2013 at 6:46 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Thank you, I appreciate the positive feedback!</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=39#respond' onclick='return addComment.moveForm( "comment-39", "39", "respond", "30" )' aria-label='Reply to Paul Gerard Porter'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1 highlander-comment" id="li-comment-72">
		<article id="comment-72" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://0.gravatar.com/avatar/cf9278dfa26ff4e19be32a3d886e520b?s=45&#038;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Alex</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-72"><time pubdate datetime="2013-05-10T13:49:30+00:00">
					May 10, 2013 at 1:49 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Thank you for this! Any idea why I get the following output when trying to run the script?</p>
<p>./configure-cisco.sh: line 1: {rtf1ansiansicpg1252cocoartf1187cocoasubrtf370: command not found<br />
./configure-cisco.sh: line 2: syntax error near unexpected token `}&#8217;<br />
./configure-cisco.sh: line 2: `{\fonttbl\f0\fnil\fcharset0 Consolas;\f1\fnil\fcharset0 Consolas-Bold;}&#8217;</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=72#respond' onclick='return addComment.moveForm( "comment-72", "72", "respond", "30" )' aria-label='Reply to Alex'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-paulgporter bypostauthor odd alt depth-2 highlander-comment" id="li-comment-73">
		<article id="comment-73" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-73"><time pubdate datetime="2013-05-10T14:00:31+00:00">
					May 10, 2013 at 2:00 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>It looks like Rich Text formatting is in the script you are trying to run, so I am assuming you created it with some sort of text editor. Try saving the file as plain text or using the vi editor from within a terminal window to create it.</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=73#respond' onclick='return addComment.moveForm( "comment-73", "73", "respond", "30" )' aria-label='Reply to Paul Gerard Porter'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment even depth-3 highlander-comment" id="li-comment-74">
		<article id="comment-74" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://0.gravatar.com/avatar/cf9278dfa26ff4e19be32a3d886e520b?s=45&#038;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Alex</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-74"><time pubdate datetime="2013-05-10T14:07:47+00:00">
					May 10, 2013 at 2:07 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>You were right. I switched to TextWrangler and all is good now. Thanks so much!</p>
							</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-paulgporter bypostauthor odd alt depth-3 highlander-comment" id="li-comment-75">
		<article id="comment-75" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-75"><time pubdate datetime="2013-05-10T14:16:04+00:00">
					May 10, 2013 at 2:16 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Happy to help!</p>
							</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1 highlander-comment" id="li-comment-77">
		<article id="comment-77" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://0.gravatar.com/avatar/63e6ee78545af8f84b89257b02516cea?s=45&#038;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">rudy</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-77"><time pubdate datetime="2013-05-16T07:18:05+00:00">
					May 16, 2013 at 7:18 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Don&#8217;t you think Perl would be easier than Expect ?</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=77#respond' onclick='return addComment.moveForm( "comment-77", "77", "respond", "30" )' aria-label='Reply to rudy'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-paulgporter bypostauthor odd alt depth-2 highlander-comment" id="li-comment-78">
		<article id="comment-78" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-78"><time pubdate datetime="2013-05-16T07:37:39+00:00">
					May 16, 2013 at 7:37 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>No. Expect is designed for interacting with CLI&#8217;s and works extremely well for these type of network administration tasks. Perl is more difficult to learn for people who don&#8217;t have a programming background.</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=78#respond' onclick='return addComment.moveForm( "comment-78", "78", "respond", "30" )' aria-label='Reply to Paul Gerard Porter'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1 highlander-comment" id="li-comment-79">
		<article id="comment-79" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://0.gravatar.com/avatar/63e6ee78545af8f84b89257b02516cea?s=45&#038;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">rudy</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-79"><time pubdate datetime="2013-05-16T08:37:12+00:00">
					May 16, 2013 at 8:37 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>with Expect you need to learn Bash scripting too.. I will consider both and your advice as I am trying to come up with scripts for Cisco devices .  Thanks</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=79#respond' onclick='return addComment.moveForm( "comment-79", "79", "respond", "30" )' aria-label='Reply to rudy'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-paulgporter bypostauthor odd alt depth-2 highlander-comment" id="li-comment-80">
		<article id="comment-80" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-80"><time pubdate datetime="2013-05-16T08:41:22+00:00">
					May 16, 2013 at 8:41 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>You might also want to check out Python. Cisco has embraced it to the point where the Nexus line has a Python API. That&#8217;s on my agenda for Q3.</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=80#respond' onclick='return addComment.moveForm( "comment-80", "80", "respond", "30" )' aria-label='Reply to Paul Gerard Porter'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1 highlander-comment" id="li-comment-98">
		<article id="comment-98" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://0.gravatar.com/avatar/6fb4ac57245fc3c257e21f4238327488?s=45&#038;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Robert Tavoularis</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-98"><time pubdate datetime="2013-07-01T10:42:22+00:00">
					July 1, 2013 at 10:42 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>This is an incredible example that pretty much shows me everything I need to know to automate some simple tasks.  Thank you!</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=98#respond' onclick='return addComment.moveForm( "comment-98", "98", "respond", "30" )' aria-label='Reply to Robert Tavoularis'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1 highlander-comment" id="li-comment-146">
		<article id="comment-146" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://0.gravatar.com/avatar/ccc2b3b85ed34e2e8cab0607b94dec02?s=45&#038;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Jenny</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-146"><time pubdate datetime="2013-08-13T23:22:43+00:00">
					August 13, 2013 at 11:22 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>This has solved my problem, namely a script to ssh onto a switch which displays a message before asking for the password.  I couldn&#8217;t find a perl example that could deal with that.</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=146#respond' onclick='return addComment.moveForm( "comment-146", "146", "respond", "30" )' aria-label='Reply to Jenny'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1 highlander-comment" id="li-comment-160">
		<article id="comment-160" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/21ca5bb1e6fa941a6c8f301dd6d18768?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Bob</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-160"><time pubdate datetime="2013-08-30T12:32:41+00:00">
					August 30, 2013 at 12:32 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Thanks for this post!  </p>
<p>Question &#8211; At my work I ssh into the ASR device then from the ASR I telnet to each switch&#8230;. ACL only allows ASR device to telnet to each switch I can&#8217;t ssh/telnet to the switches directly&#8230; How would I go about scripting that???  thanks!</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=160#respond' onclick='return addComment.moveForm( "comment-160", "160", "respond", "30" )' aria-label='Reply to Bob'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-paulgporter bypostauthor odd alt depth-2 highlander-comment" id="li-comment-168">
		<article id="comment-168" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-168"><time pubdate datetime="2013-09-05T08:42:03+00:00">
					September 5, 2013 at 8:42 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Hi Bob,</p>
<p>This can be done with a for loop within the configure-cisco.exp script. </p>
<p>Create a file with the names/IP&#8217;s of the devcies you want to connect to from the ASR:</p>
<p>pporter@ops002:~$ cat my_devices<br />
sw-001<br />
sw-099</p>
<p>Then modify a script like this to suit your needs (please note that WordPress might be converting the greater-than symbot to ASCII below)</p>
<p><code>#!/usr/bin/expect -f</p>
<p># Set variables - some of which were sent from the calling bash script</p>
<p>set hostname [lindex $argv 0]<br />
set username $env(USER)<br />
set password [lindex $argv 1]<br />
set enablepassword [lindex $argv 2]<br />
set timeout 5</p>
<p>spawn ssh -o StrictHostKeyChecking=no $username\@$hostname<br />
        expect "*assword: "<br />
        send "$password\r"</p>
<p># SSH to each IP/Hostname in local file named "my_devices", do a "show clock", then exit</p>
<p>set devicelist [open my_devices]<br />
while {[gets $devicelist line] != -1} {<br />
    expect "*&gt;"<br />
    send "ssh $line \n"<br />
    expect "Password:"<br />
    send "$password\r"<br />
    expect "*&gt;"<br />
    send "show clock\n"<br />
    expect "*&gt;"<br />
    send "exit\n"<br />
    expect "*&gt;"<br />
}<br />
close $devicelist</p>
<p>send "exit\n"<br />
expect ":~\$"<br />
exit<br />
</code></p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=168#respond' onclick='return addComment.moveForm( "comment-168", "168", "respond", "30" )' aria-label='Reply to Paul Gerard Porter'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment even depth-3 highlander-comment" id="li-comment-274">
		<article id="comment-274" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/21ca5bb1e6fa941a6c8f301dd6d18768?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Bob</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-274"><time pubdate datetime="2013-10-01T09:24:48+00:00">
					October 1, 2013 at 9:24 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>thx Paul!</p>
							</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1 highlander-comment" id="li-comment-163">
		<article id="comment-163" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/b236464a6ebe4d8c987d1b35e2286799?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Junior</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-163"><time pubdate datetime="2013-09-04T21:43:56+00:00">
					September 4, 2013 at 9:43 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Hi nice script. I have an off question about your blog. How are you displaying the code in the language colours?</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=163#respond' onclick='return addComment.moveForm( "comment-163", "163", "respond", "30" )' aria-label='Reply to Junior'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-paulgporter bypostauthor even depth-2 highlander-comment" id="li-comment-169">
		<article id="comment-169" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-169"><time pubdate datetime="2013-09-05T08:49:22+00:00">
					September 5, 2013 at 8:49 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>WordPress code tag:</p>
<p><a href="http://en.support.wordpress.com/code/posting-source-code/" rel="nofollow">http://en.support.wordpress.com/code/posting-source-code/</a></p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=169#respond' onclick='return addComment.moveForm( "comment-169", "169", "respond", "30" )' aria-label='Reply to Paul Gerard Porter'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="li-comment-164">
		<article id="comment-164" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/b236464a6ebe4d8c987d1b35e2286799?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Junior</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-164"><time pubdate datetime="2013-09-04T22:29:48+00:00">
					September 4, 2013 at 10:29 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>I have another question. What if you want to put this in just one file? Cant you put the expect part in a function and call it from the bash script so I just deal with one file? How will I achieve that easily?</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=164#respond' onclick='return addComment.moveForm( "comment-164", "164", "respond", "30" )' aria-label='Reply to Junior'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-paulgporter bypostauthor even depth-2 highlander-comment" id="li-comment-170">
		<article id="comment-170" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-170"><time pubdate datetime="2013-09-05T09:01:18+00:00">
					September 5, 2013 at 9:01 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>My goal was to make this easy for Network Engineers who don&#8217;t have a strong scripting background to follow. Keeping the Bash separate from the Expect seemed to be the best way to do that. </p>
<p>If you combine the two into a simple, single script then please post it as a comment so others can check it out.</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=170#respond' onclick='return addComment.moveForm( "comment-170", "170", "respond", "30" )' aria-label='Reply to Paul Gerard Porter'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment odd alt depth-3 highlander-comment" id="li-comment-171">
		<article id="comment-171" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/b236464a6ebe4d8c987d1b35e2286799?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Junior</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-171"><time pubdate datetime="2013-09-05T10:53:36+00:00">
					September 5, 2013 at 10:53 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Thanks for the reply, If I figure it out I ll let you know.</p>
							</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1 highlander-comment" id="li-comment-165">
		<article id="comment-165" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/b236464a6ebe4d8c987d1b35e2286799?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Junior</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-165"><time pubdate datetime="2013-09-04T22:51:26+00:00">
					September 4, 2013 at 10:51 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Oh how can I use this:</p>
<p>/usr/bin/expect&lt;&lt;EOF<br />
expect eof<br />
EOF</p>
<p>I know you can put the expect script in that but how do I incorporate it in your script?</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=165#respond' onclick='return addComment.moveForm( "comment-165", "165", "respond", "30" )' aria-label='Reply to Junior'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="li-comment-277">
		<article id="comment-277" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/5733a30a9195a73f59bdf1a728357e08?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Mike C</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-277"><time pubdate datetime="2013-10-01T12:17:10+00:00">
					October 1, 2013 at 12:17 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>I&#8217;m really interested in this script and I tried to do a test run but no luck.  I created all 3 files in vim editor.  I copied everything in the .exp file except:</p>
<p># Enter your commands here. Examples listed below<br />
 #send &#8220;tacacs-server host 10.0.0.5\n&#8221;<br />
 #expect &#8220;(config)#&#8221;<br />
 #send &#8220;tacacs-server directed-request\n&#8221;<br />
 #expect &#8220;(config)#&#8221;<br />
 #send &#8220;tacacs-server key 7 0000000000000\n&#8221;<br />
 #expect &#8220;(config)#&#8221;<br />
 #send &#8220;ntp server 10.0.0.9\n&#8221;<br />
 #expect &#8220;(config)#&#8221;<br />
 #send &#8220;ip domain-name yourdomain.com\n&#8221;<br />
 #expect &#8220;(config)#&#8221;</p>
<p>ran configure-cisco.sh from /Users/username/ but I get configure-cisco.sh: command not found</p>
<p>even when I do sudo</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=277#respond' onclick='return addComment.moveForm( "comment-277", "277", "respond", "30" )' aria-label='Reply to Mike C'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-paulgporter bypostauthor even depth-2 highlander-comment" id="li-comment-278">
		<article id="comment-278" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-278"><time pubdate datetime="2013-10-01T13:53:51+00:00">
					October 1, 2013 at 1:53 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>What does &#8220;echo $PATH&#8221; give you? What about an &#8220;ls -la&#8221; of the directory where you put the files? It sounds like the file is not in the directory where you think it is or you made a typo when creating the file name.</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=278#respond' onclick='return addComment.moveForm( "comment-278", "278", "respond", "30" )' aria-label='Reply to Paul Gerard Porter'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment odd alt depth-3 highlander-comment" id="li-comment-304">
		<article id="comment-304" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/5733a30a9195a73f59bdf1a728357e08?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Mike C</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-304"><time pubdate datetime="2013-10-02T17:42:41+00:00">
					October 2, 2013 at 5:42 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Paul</p>
<p>The results of what you were asking:<br />
$PATH<br />
/sw/bin:/sw/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11R6/bin</p>
<p>ls -la:<br />
-rw-r&#8211;r&#8211;  configure-cisco.exp<br />
-rw-r&#8211;r&#8211;  configure-cisco.sh<br />
-rw-r&#8211;r&#8211;  device-list.txt</p>
<p>pwd:<br />
/Users/myusername</p>
<p>Thanks</p>
<p>Mike</p>
							</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-paulgporter bypostauthor even depth-3 highlander-comment" id="li-comment-308">
		<article id="comment-308" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-308"><time pubdate datetime="2013-10-02T22:15:48+00:00">
					October 2, 2013 at 10:15 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Hey Mike,</p>
<p>You missed the part that made these executables. Please do a &#8220;chmod +x&#8221; for the shell script and expect script.</p>
							</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt depth-2 highlander-comment" id="li-comment-287">
		<article id="comment-287" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://0.gravatar.com/avatar/3d80c095473674d189b13cc34e2b55e3?s=45&#038;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Don</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-287"><time pubdate datetime="2013-10-01T20:37:33+00:00">
					October 1, 2013 at 8:37 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Because that command &#8220;configure-cisco.sh&#8221; off course does not exist.<br />
Run &#8220;bash  configure-cisco.sh&#8221;  or   &#8220;./ configure-cisco.sh&#8221; with out the quotes of course. the file needs to be executable try the second option but the first should work regardless</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=287#respond' onclick='return addComment.moveForm( "comment-287", "287", "respond", "30" )' aria-label='Reply to Don'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment even depth-3 highlander-comment" id="li-comment-305">
		<article id="comment-305" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/5733a30a9195a73f59bdf1a728357e08?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Mike C</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-305"><time pubdate datetime="2013-10-02T18:03:58+00:00">
					October 2, 2013 at 6:03 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>That seems to work but I get the following results:</p>
<p>Enter the SSH password for myusername<br />
Enter the Enable password for myusername<br />
configure-cisco.sh: line 11: ./configure-cisco.exp: Permission denied<br />
myusername-MacBook-Pro:~ myusername$</p>
<p>I guess I&#8217;m looking for a good reference to be able to interpret the syntax.  My interpretation is </p>
<p>1)device-list.txt &#8211; everything in here will be included in the batch process<br />
2)configure-cisco.sh &#8211; apply password for devices in device-list.txt and configure-cisco.exp.</p>
<p>3)configure-cisco.exp &#8211; Finally apply the syntax to do ios upgrades, tacacs information etc.</p>
<p>Thanks,</p>
<p>Mike</p>
							</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-paulgporter bypostauthor odd alt depth-3 highlander-comment" id="li-comment-310">
		<article id="comment-310" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-310"><time pubdate datetime="2013-10-02T22:22:48+00:00">
					October 2, 2013 at 10:22 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>You got the permission denied because the expect script isn&#8217;t executable (see my other comment). </p>
<p>Yes, that is basically what is going on. To be more specific, the bash script is also running a loop and applying the settings specified in the expect portion for every host name it sees in the device list. </p>
<p>Keep working on it and feel free to post more questions if you have them. Once you get this working you&#8217;ll be thankful you stuck with it. My infrastructure is over 200 devices and it&#8217;s a breeze to push out any sort of config change.</p>
							</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1 highlander-comment" id="li-comment-326">
		<article id="comment-326" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/5733a30a9195a73f59bdf1a728357e08?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Mike C</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-326"><time pubdate datetime="2013-10-03T07:47:00+00:00">
					October 3, 2013 at 7:47 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>If you&#8217;re referring to the chmod command I did a chmod 755 on all 3 files.  I&#8217;m primarily a PC guy but about 5 years ago I started experimenting with FreeBSD and because of that I was able to get around in the command line on my Macbook.  I did notice the for, in and do which I suspected was applying a loop.</p>
<p>Results I&#8217;m getting when I run bash configure-cisco.sh are:</p>
<p>Myusername-MacBook-Pro:~ Myusername$ bash configure-cisco.sh<br />
Enter the SSH password for Myusername<br />
Enter the Enable password for Myusername<br />
./configure-cisco.exp: line 1: et: command not found<br />
./configure-cisco.exp: line 3: syntax error near unexpected token `(&#8216;<br />
./configure-cisco.exp: line 3: ` set username $env(USER)&#8217;</p>
<p>each script has -rwxr-xr-x and I&#8217;m the owner so this should be correct?</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=326#respond' onclick='return addComment.moveForm( "comment-326", "326", "respond", "30" )' aria-label='Reply to Mike C'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-paulgporter bypostauthor odd alt depth-2 highlander-comment" id="li-comment-342">
		<article id="comment-342" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-342"><time pubdate datetime="2013-10-03T20:06:20+00:00">
					October 3, 2013 at 8:06 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Hey Mike, thanks for emailing me the files you were using. Make the corrections I suggested and you should be good to go. Enjoy!</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=342#respond' onclick='return addComment.moveForm( "comment-342", "342", "respond", "30" )' aria-label='Reply to Paul Gerard Porter'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1 highlander-comment" id="li-comment-457">
		<article id="comment-457" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://0.gravatar.com/avatar/f54d37dfdc0c26cc2dd12b02a0ca1a72?s=45&#038;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Javier</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-457"><time pubdate datetime="2013-10-08T14:12:49+00:00">
					October 8, 2013 at 2:12 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Hey, Paul:<br />
Thanks for posting the expect script.  I&#8217;ve been developing a bash script for 6 years to automate a configuration inventory of hundreds of network devices (different makers).  It works well, but it was completely automatic only with telnet connections.  Nowadays we are using ssh v2 connections, so automation of this inventory script was not complete and I needed to add password from the keyboard at connection time.</p>
<p>Thanks again for sharing your knowledge.  I will try your suggestions.</p>
<p>Javier</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=457#respond' onclick='return addComment.moveForm( "comment-457", "457", "respond", "30" )' aria-label='Reply to Javier'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-paulgporter bypostauthor odd alt depth-2 highlander-comment" id="li-comment-592">
		<article id="comment-592" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-592"><time pubdate datetime="2013-10-12T20:28:11+00:00">
					October 12, 2013 at 8:28 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>You&#8217;re welcome and I hope it can be of help! Thanks for taking the time to leave a comment</p>
<p>Cheers,</p>
<p>&#8211; Paul</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=592#respond' onclick='return addComment.moveForm( "comment-592", "592", "respond", "30" )' aria-label='Reply to Paul Gerard Porter'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1 highlander-comment" id="li-comment-703">
		<article id="comment-703" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://i2.wp.com/graph.facebook.com/811998769/picture?q=type%3Dlarge%26_md5%3D08efc268ca6b85439ff8458b4abbcda5&#038;resize=45%2C45' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='https://www.facebook.com/rohayu.ramsah' rel='external nofollow' class='url'>Rohayu Ramsah</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-703"><time pubdate datetime="2013-10-17T01:47:35+00:00">
					October 17, 2013 at 1:47 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Hi Paul,</p>
<p>I&#8217;m quite blind in scripting thingy, would you mind to share the command if using the telnet?<br />
==================================================<br />
&#8220;configure-cisco.sh</p>
<p>This is a bash shell script which you will run to start the entire process. It will prompt for your ssh password and an enable password, and then feed it to the Expect script along with the contents of device_list.txt. I found this more secure then reading the passwords from a file and easier to do in bash than in expect.</p>
<p>1<br />
2<br />
3<br />
4<br />
5<br />
6<br />
7<br />
8<br />
9<br />
10<br />
11<br />
12<br />
#!/bin/bash<br />
 # Collect the current user&#8217;s ssh and enable passwords<br />
 echo -n &#8220;Enter the SSH password for $(whoami) &#8221;<br />
 read -s -e password<br />
 echo -ne &#8216;\n&#8217;<br />
 echo -n &#8220;Enter the Enable password for $(whoami) &#8221;<br />
 read -s -e enable<br />
 echo -ne &#8216;\n&#8217;<br />
# Feed the expect script a device list &amp; the collected passwords<br />
for device in `cat device-list.txt`; do<br />
 ./configure-cisco.exp $device $password $enable ;<br />
 done<br />
&#8221;<br />
===================================================</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=703#respond' onclick='return addComment.moveForm( "comment-703", "703", "respond", "30" )' aria-label='Reply to Rohayu Ramsah'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-paulgporter bypostauthor odd alt depth-2 highlander-comment" id="li-comment-715">
		<article id="comment-715" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-715"><time pubdate datetime="2013-10-17T10:55:37+00:00">
					October 17, 2013 at 10:55 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Hi Rohayu,</p>
<p>In the configure-cisco.exp script, replace this:</p>
<p># Don&#8217;t check keys<br />
 spawn ssh -o StrictHostKeyChecking=no $username\@$hostname</p>
<p>With this:</p>
<p># Telnet<br />
spawn telnet $hostname<br />
        expect &#8220;Username: &#8221;<br />
        send &#8220;$username\r&#8221;<br />
        expect &#8220;*assword: &#8221;<br />
        send &#8220;$password\r&#8221;</p>
<p>Let me know if that doesn&#8217;t work for you.</p>
<p>Thanks,</p>
<p>&#8211; Paul</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=715#respond' onclick='return addComment.moveForm( "comment-715", "715", "respond", "30" )' aria-label='Reply to Paul Gerard Porter'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1 highlander-comment" id="li-comment-724">
		<article id="comment-724" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://i2.wp.com/graph.facebook.com/811998769/picture?q=type%3Dlarge%26_md5%3Dd72e9c5a253cefb9390a1c3bc4bb87cc&#038;resize=45%2C45' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='https://www.facebook.com/rohayu.ramsah' rel='external nofollow' class='url'>Rohayu Ramsah</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-724"><time pubdate datetime="2013-10-17T18:36:18+00:00">
					October 17, 2013 at 6:36 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Found the telnet option already. Anyway, how if we&#8217;re using list of devices that running with the different list of passwords on each devices. Any idea?</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=724#respond' onclick='return addComment.moveForm( "comment-724", "724", "respond", "30" )' aria-label='Reply to Rohayu Ramsah'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-paulgporter bypostauthor odd alt depth-2 highlander-comment" id="li-comment-738">
		<article id="comment-738" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-738"><time pubdate datetime="2013-10-18T08:31:06+00:00">
					October 18, 2013 at 8:31 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Yes it can definitely be done, but you would have to sacrifice security by putting all of those passwords in the device-list.txt file (putting passwords in text files is a very bad idea!) and modify the bash script to use something like awk to parse it and send a hostname and password to the expect script. You&#8217;re probably better off modifying the expect script so that it waits for you to manually enter the password for each device.</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=738#respond' onclick='return addComment.moveForm( "comment-738", "738", "respond", "30" )' aria-label='Reply to Paul Gerard Porter'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment even depth-3 highlander-comment" id="li-comment-900">
		<article id="comment-900" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/8290f13cbea50b88798bf9c1170872af?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">phoeneous</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-900"><time pubdate datetime="2014-02-11T15:37:04+00:00">
					February 11, 2014 at 3:37 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>How do you modify the script to manually prompt for password?</p>
							</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt depth-2 highlander-comment" id="li-comment-1703">
		<article id="comment-1703" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://1.gravatar.com/avatar/4af4f37fc37e8a915a43ab57f3e29533?s=45&#038;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">mike</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1703"><time pubdate datetime="2014-09-23T14:35:59+00:00">
					September 23, 2014 at 2:35 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>I&#8217;m having a hard issue.  I have your script in linux and yum installed expect.  I only have root user in the linux machine.  I&#8217;m trying to get ur script to work.<br />
In configure-cisco.sh:  I change the $(whoami) to a real user in TACACS server for accessing all cisco devices.</p>
<p>#!/bin/bash<br />
# Collect the current user&#8217;s ssh and enable passwords<br />
echo -n &#8220;Enter the SSH password for $(mike10) &#8221;<br />
read -s -e password<br />
echo -ne &#8216;\n&#8217;<br />
echo -n &#8220;Enter the Enable password for $(mike10) &#8221;<br />
read -s -e enable<br />
echo -ne &#8216;\n&#8217;<br />
# Feed the expect script a device list &amp; the collected passwords<br />
for device in `cat device-list.txt`; do<br />
./configure-cisco.exp $device $password $enable ;<br />
done</p>
<p>I get this error:<br />
[root@localhost script]# ./configure-cisco.sh<br />
./configure-cisco.sh: line 3: mike10: command not found<br />
Enter the SSH password for<br />
./configure-cisco.sh: line 6: mike10: command not found<br />
Enter the Enable password for</p>
<p>I&#8217;m trying to do TELNET as the switches don&#8217;t do SSH.:</p>
<p>I deleted these two lines and add the #Telnet.<br />
deleted:<br />
# Don&#8217;t check keys<br />
 spawn ssh -o StrictHostKeyChecking=no $username\@$hostname</p>
<p>added:<br />
# Telnet<br />
spawn telnet $hostname<br />
expect “Username: ”<br />
send “$username\r”<br />
expect “*assword: ”<br />
send “$password\r”</p>
<p>The telnet doesn&#8217;t work either.  Any suggestions would be great.</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=1703#respond' onclick='return addComment.moveForm( "comment-1703", "1703", "respond", "30" )' aria-label='Reply to mike'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-paulgporter bypostauthor even depth-3 highlander-comment" id="li-comment-1704">
		<article id="comment-1704" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1704"><time pubdate datetime="2014-09-23T15:26:16+00:00">
					September 23, 2014 at 3:26 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Your echo lines should read like this:</p>
<p>echo -n &#8220;Enter the SSH password for mike10 &#8221;</p>
<p>In the expect script make the following change:<br />
<code>#set username $env(USER)<br />
set username mike10</code></p>
<p>Things should flow from there.</p>
							</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1 highlander-comment" id="li-comment-788">
		<article id="comment-788" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://i2.wp.com/graph.facebook.com/811998769/picture?q=type%3Dlarge%26_md5%3Dd72e9c5a253cefb9390a1c3bc4bb87cc&#038;resize=45%2C45' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='https://www.facebook.com/rohayu.ramsah' rel='external nofollow' class='url'>Rohayu Ramsah</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-788"><time pubdate datetime="2013-10-20T17:11:48+00:00">
					October 20, 2013 at 5:11 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Hi Paul,<br />
Thanks for the reply. <span class='wp-smiley wp-emoji wp-emoji-smile' title=':)'>:)</span></p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=788#respond' onclick='return addComment.moveForm( "comment-788", "788", "respond", "30" )' aria-label='Reply to Rohayu Ramsah'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1 highlander-comment" id="li-comment-797">
		<article id="comment-797" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://i2.wp.com/graph.facebook.com/100000837580086/picture?q=type%3Dlarge%26_md5%3Dba3897090f50e4372a18aada4d9f7cd1&#038;resize=45%2C45' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='https://www.facebook.com/claramarissalee' rel='external nofollow' class='url'>Clara Marisa</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-797"><time pubdate datetime="2013-10-21T00:31:31+00:00">
					October 21, 2013 at 12:31 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>hi paul, i have this kind of environment, i need to ssh to the server A, then from this server, i have to telnet several switches and routers and collecting some logs. </p>
<p>let say,<br />
server A, 10.0.0.1 password: abc123<br />
switch B, 10.0.0.2, telnet password: def456, enable password: ghj123<br />
switch C, 10.0.0.3, telnet password: def123, enable password: ghj456<br />
.<br />
.<br />
.<br />
router Z, 10.0.0.2, telnet password: def789, enable password: ghj789.</p>
<p>if you don&#8217;t mind, would you share an example of the script to make this work. </p>
<p>Thanks a lot <span class='wp-smiley wp-emoji wp-emoji-smile' title=':)'>:)</span></p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=797#respond' onclick='return addComment.moveForm( "comment-797", "797", "respond", "30" )' aria-label='Reply to Clara Marisa'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-paulgporter bypostauthor odd alt depth-2 highlander-comment" id="li-comment-824">
		<article id="comment-824" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-824"><time pubdate datetime="2013-11-14T15:39:55+00:00">
					November 14, 2013 at 3:39 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Hi Clara,</p>
<p>If you don&#8217;t have the ability to run the script from the jump-host you are SSH&#8217;ing to then you could try changing the bash script so that it first calls a different expect script that logs you into the jump host. Once connected, the next expect script could take over and run the commands.</p>
<p>If you have different usernames and passwords for each network device then your best bet would be to configure your iOS devices to use RSA Auth (keys) rather than passwords. You could then write a script that parses a file of usernames mapped to devices without the need to also include the password.</p>
<p>Thanks,</p>
<p>&#8211; Paul</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=824#respond' onclick='return addComment.moveForm( "comment-824", "824", "respond", "30" )' aria-label='Reply to Paul Gerard Porter'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1 highlander-comment" id="li-comment-847">
		<article id="comment-847" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://1.gravatar.com/avatar/d5a3e55dab2bac0f1bf7a4cab9e0f994?s=45&#038;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Lucky</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-847"><time pubdate datetime="2013-11-27T02:31:12+00:00">
					November 27, 2013 at 2:31 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Hi Paul,</p>
<p>I have a requirement to test reboot cases. So, i have to spawn a telnet session to console, issue reboot and expect the prompt back, check the time taken to reboot.</p>
<p>Any graceful way to automate this in expect.<br />
In the current script I have (simple spawn, reboot, expect prompt), sometimes hit the &#8216;eof&#8217; before reboot and the process terminates.</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=847#respond' onclick='return addComment.moveForm( "comment-847", "847", "respond", "30" )' aria-label='Reply to Lucky'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="li-comment-870">
		<article id="comment-870" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/2fca1718cc613ab299dd885d45a26ebd?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Graham Rose</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-870"><time pubdate datetime="2014-01-15T16:24:05+00:00">
					January 15, 2014 at 4:24 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>/usr/bin is the typical location for expect in most linux distros incliuding fedora, redhat enterprise linux, and centos</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=870#respond' onclick='return addComment.moveForm( "comment-870", "870", "respond", "30" )' aria-label='Reply to Graham Rose'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1 highlander-comment" id="li-comment-934">
		<article id="comment-934" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/57a6223caa06d3cd76b8e52b95e29349?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Kashif</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-934"><time pubdate datetime="2014-03-09T19:49:56+00:00">
					March 9, 2014 at 7:49 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Hi</p>
<p>Can you recommend any good book for python like &#8220;Exploring Expect&#8221; for automating tasks?</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=934#respond' onclick='return addComment.moveForm( "comment-934", "934", "respond", "30" )' aria-label='Reply to Kashif'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="li-comment-968">
		<article id="comment-968" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://0.gravatar.com/avatar/95453f25d5e8f9136b3d33449f0388e5?s=45&#038;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Jeremias Mapandzene</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-968"><time pubdate datetime="2014-03-21T09:48:02+00:00">
					March 21, 2014 at 9:48 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Paul,</p>
<p>What if your Cisco username is not the whoami on Linux?</p>
<p> # Collect the current user&#8217;s ssh and enable passwords<br />
 echo -n &#8220;Enter the SSH password for $(whoami) &#8221;<br />
 read -s -e password<br />
 echo -ne &#8216;\n&#8217;<br />
 echo -n &#8220;Enter the Enable password for $(whoami) &#8221;<br />
 read -s -e enable<br />
 echo -ne &#8216;\n&#8217;</p>
<p>Can it be replaced with another Username/Password?</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=968#respond' onclick='return addComment.moveForm( "comment-968", "968", "respond", "30" )' aria-label='Reply to Jeremias Mapandzene'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1 highlander-comment" id="li-comment-1049">
		<article id="comment-1049" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/530bc40a2b4524c4dc5374e98e11a8d9?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://www.bibalex.org' rel='external nofollow' class='url'>mahmoud.moawad</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1049"><time pubdate datetime="2014-04-16T05:53:30+00:00">
					April 16, 2014 at 5:53 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Thanks Paul for your fantastic blog, but i have a question<br />
i am running your script on a linux redhate machine, but the script is unable to locate the device-list.txt file, where should i place this file ??</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=1049#respond' onclick='return addComment.moveForm( "comment-1049", "1049", "respond", "30" )' aria-label='Reply to mahmoud.moawad'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="li-comment-1056">
		<article id="comment-1056" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://0.gravatar.com/avatar/9c5637e1d5e33704e0527a6534faf052?s=45&#038;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Jenner</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1056"><time pubdate datetime="2014-04-18T09:46:45+00:00">
					April 18, 2014 at 9:46 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Thanks so much for this!<br />
It works in my environment except for the logging&#8230;<br />
Please provide any addition insight if you can.<br />
Here&#8217;s the error(s) I&#8217;m getting.</p>
<p>./configure-cisco.sh: command substitution: line 10: syntax error near unexpected token `newline&#8217;<br />
./configure-cisco.sh: command substitution: line 10: `cat device-list.txt&#8217;</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=1056#respond' onclick='return addComment.moveForm( "comment-1056", "1056", "respond", "30" )' aria-label='Reply to Jenner'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1 highlander-comment" id="li-comment-1092">
		<article id="comment-1092" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://0.gravatar.com/avatar/9964d7874f215834e897ff37918f1241?s=45&#038;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Justin</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1092"><time pubdate datetime="2014-04-28T13:55:33+00:00">
					April 28, 2014 at 1:55 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Paul, this script is awesome!   I just used it deploy a change to all 50 switches on my campus.  Thank you!</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=1092#respond' onclick='return addComment.moveForm( "comment-1092", "1092", "respond", "30" )' aria-label='Reply to Justin'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-vaibhav850 odd alt thread-odd thread-alt depth-1 highlander-comment" id="li-comment-1123">
		<article id="comment-1123" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://1.gravatar.com/avatar/700013d3ad9da91aa1a5c36cacbbfaf3?s=45&#038;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">vaibhav850</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1123"><time pubdate datetime="2014-05-04T20:42:51+00:00">
					May 4, 2014 at 8:42 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Hi paul,</p>
<p>Thanks for really helpful and qualitative lesson on expect script.</p>
<p>I am new to the same field and also trying to write an script.</p>
<p>This is what i am trying to do we have a tool network automation to execute the scripts successfully on HP switches.</p>
<p>I am trying to update the ACL on all HP switches. by entering the given set of commands.</p>
<p>first will login to the switch.</p>
<p>I understand from above this can be achieved through</p>
<p># Allow this script to handle ssh connection issues<br />
expect {<br />
timeout { send_user “\nTimeout Exceeded – Check Host\n”; exit 1 }<br />
eof { send_user “\nSSH Connection To $hostname Failed\n”; exit 1 }<br />
“*#” {}<br />
“*assword:” {<br />
send “$password\n”<br />
}<br />
}</p>
<p>given set of command</p>
<p>remove old ACL’</p>
<p>then readd acl</p>
<p>then add back to vlan 1</p>
<p>then wr mem</p>
<p>to remove acl</p>
<p>conf t</p>
<p>no access-list “grp name”</p>
<p>conf t</p>
<p>vlan 1′</p>
<p>no ip access-group “group name” in</p>
<p>exit’</p>
<p>no access-list “acl name”<br />
(config)# INSERT NEW ACL HERE<br />
(config-ext-nacl)exit<br />
(config)# vlan 1<br />
(vlan-1)# ip access-group “group name” in<br />
(vlan-1)# exit<br />
(config)# exit</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=1123#respond' onclick='return addComment.moveForm( "comment-1123", "1123", "respond", "30" )' aria-label='Reply to vaibhav850'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1 highlander-comment" id="li-comment-1243">
		<article id="comment-1243" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://1.gravatar.com/avatar/1ddd8392570a44ea9cf08127b023b647?s=45&#038;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://theitnetworkingalliance.wordpress.com' rel='external nofollow' class='url'>Jordi</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1243"><time pubdate datetime="2014-05-29T12:22:44+00:00">
					May 29, 2014 at 12:22 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Hi Paul,<br />
I stumbled upon your blog when searching for expect ssh login script for Cisco IOS devices.<br />
With your research we were able to adjust the scripts to our needs and automate and capture information from a lot of devices.</p>
<p>Thanks for your effort!!</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=1243#respond' onclick='return addComment.moveForm( "comment-1243", "1243", "respond", "30" )' aria-label='Reply to Jordi'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="li-comment-1322">
		<article id="comment-1322" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://1.gravatar.com/avatar/a8d4f4c3bd300c2302a7eb97894cbb10?s=45&#038;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Victor</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1322"><time pubdate datetime="2014-06-13T11:33:51+00:00">
					June 13, 2014 at 11:33 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Paul, thank you for this fantastic blog.<br />
Your example was perfect to my needs and I could automate a very boring job a have, involving 34 routers in my company&#8217;s network.<br />
Now, typing my user and password one time, I get the job done in all routers at once, in 4 minutes only.<br />
It&#8217;s a shame, I was expending 40 ~ 50 minutes to do it manually before find your site.</p>
<p>My task envolves collect CRC on all routers once a week and clear counters after that.</p>
<p>Now it&#8217;s easy.. </p>
<p>Thks a lot and congratulations.</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=1322#respond' onclick='return addComment.moveForm( "comment-1322", "1322", "respond", "30" )' aria-label='Reply to Victor'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1 highlander-comment" id="li-comment-1365">
		<article id="comment-1365" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://1.gravatar.com/avatar/4d659c91cb7057b8703f0510817d1e7b?s=45&#038;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Andreas</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1365"><time pubdate datetime="2014-07-02T03:05:23+00:00">
					July 2, 2014 at 3:05 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Hi Paul, very nicely put together !</p>
<p>is it possible to omit the output to the tty and write the output of i.e. &#8220;show tech&#8221; directly into a file ? How could this be done ?</p>
<p>I would like to keep the shell windows free for status messages and it would potentially be more performant, as displaying this much text also takes some time to display.</p>
<p>Many thanks !<br />
Andreas</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=1365#respond' onclick='return addComment.moveForm( "comment-1365", "1365", "respond", "30" )' aria-label='Reply to Andreas'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-sarlacpit odd alt thread-odd thread-alt depth-1 highlander-comment" id="li-comment-1441">
		<article id="comment-1441" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://1.gravatar.com/avatar/4bb84ca95d3a93712f5f692a83fab41b?s=45&#038;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://willdroppantsformoney.wordpress.com' rel='external nofollow' class='url'>sarlacpit</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1441"><time pubdate datetime="2014-07-23T05:48:26+00:00">
					July 23, 2014 at 5:48 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Andreas </p>
<p>I found that the output can be recorded into a file by altering the expect script feed  part of the shell script to:</p>
<p>for device in `cat device-list.txt`; do<br />
 ./configure-cisco.exp &gt;&gt; output.txt $device $password $enable ;<br />
 done</p>
<p>This will append the STDOUT to output.txt in the local directory. If you wanted to watch the output at the same time, send the script in to the back ground  by running it, enter your username &amp; password press ctrl-z which will pause the process. Now type the bg command to un-pause it and set it running in the background.</p>
<p>To watch the file you can run: tail -f ./output.txt</p>
<p>I have just run a batch of over 1100 devices to run a show inventory and update the access lists.</p>
<p>kudos to Paul for a great time saving piece of scripting. <span class='wp-smiley wp-emoji wp-emoji-smile' title=':)'>:)</span></p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=1441#respond' onclick='return addComment.moveForm( "comment-1441", "1441", "respond", "30" )' aria-label='Reply to sarlacpit'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1 highlander-comment" id="li-comment-1493">
		<article id="comment-1493" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/5733a30a9195a73f59bdf1a728357e08?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Michael</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1493"><time pubdate datetime="2014-08-06T12:09:33+00:00">
					August 6, 2014 at 12:09 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>I get the following error with a script that&#8217;s worked great before:</p>
<p>spawn ssh -o StrictHostKeyChecking=no example@*.*.*.*<br />
Protocol major versions differ: 2 vs. 1</p>
<p>I&#8217;m just looking for the simplest way to resolve this without reinventing the wheel.</p>
<p>#!/usr/bin/expect -f</p>
<p># Set variables<br />
 set hostname [lindex $argv 0]<br />
 set username example<br />
 set password [lindex $argv 1]<br />
 set enablepassword [lindex $argv 2]<br />
 set timeout 100</p>
<p># Log results<br />
 log_file -a ~/results.log</p>
<p># Announce which device we are working on and at what time<br />
 send_user &#8220;\n&#8221;<br />
 send_user &#8220;&gt;&gt;&gt;&gt;&gt;  Working on $hostname @ [exec date] &lt;&lt;&lt;&lt;&#8221; {<br />
 send &#8220;enable\n&#8221;<br />
 expect &#8220;*assword&#8221;<br />
 send &#8220;$enablepassword\n&#8221;<br />
 expect &#8220;*#&#8221;<br />
 }<br />
 }</p>
<p># Let&#8217;s go to configure mode<br />
 send &#8220;conf t\n&#8221;<br />
 expect &#8220;(config)#&#8221;</p>
<p># Enter your commands here. Examples listed below<br />
 send &#8220;hostname test\n&#8221;<br />
 expect &#8220;(config)#&#8221;</p>
<p> send &#8220;end\n&#8221;<br />
 expect &#8220;#&#8221;<br />
 send &#8220;write mem\n&#8221;<br />
 expect &#8220;#&#8221;<br />
 send &#8220;exit\n&#8221;<br />
 expect &#8220;:~\$&#8221;<br />
 exit</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=1493#respond' onclick='return addComment.moveForm( "comment-1493", "1493", "respond", "30" )' aria-label='Reply to Michael'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="li-comment-1494">
		<article id="comment-1494" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/5733a30a9195a73f59bdf1a728357e08?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Michael</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1494"><time pubdate datetime="2014-08-06T12:14:23+00:00">
					August 6, 2014 at 12:14 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>I get the following error for an expect script that was working perfectly find before and I&#8217;m very confused by this error:</p>
<p>spawn ssh -o StrictHostKeyChecking=no <a href="mailto:example@10.2.3.118">example@10.2.3.118</a><br />
Protocol major versions differ: 2 vs. 1</p>
<p>I&#8217;m just trying to figure out the easiest way to resolve this without reinventing the wheel:)</p>
<p>#!/usr/bin/expect -f</p>
<p># Set variables<br />
 set hostname [lindex $argv 0]<br />
 set username example<br />
 set password [lindex $argv 1]<br />
 set enablepassword [lindex $argv 2]<br />
 set timeout 100</p>
<p># Log results<br />
 log_file -a ~/results.log</p>
<p># Announce which device we are working on and at what time<br />
 send_user &#8220;\n&#8221;<br />
 send_user &#8220;&gt;&gt;&gt;&gt;&gt;  Working on $hostname @ [exec date] &lt;&lt;&lt;&lt;&#8221; {<br />
 send &#8220;enable\n&#8221;<br />
 expect &#8220;*assword&#8221;<br />
 send &#8220;$enablepassword\n&#8221;<br />
 expect &#8220;*#&#8221;<br />
 }<br />
 }</p>
<p># Let&#8217;s go to configure mode<br />
 send &#8220;conf t\n&#8221;<br />
 expect &#8220;(config)#&#8221;</p>
<p># Enter your commands here. Examples listed below<br />
 send &#8220;hostname test\n&#8221;<br />
 expect &#8220;(config)#&#8221;</p>
<p> send &#8220;end\n&#8221;<br />
 expect &#8220;#&#8221;<br />
 send &#8220;write mem\n&#8221;<br />
 expect &#8220;#&#8221;<br />
 send &#8220;exit\n&#8221;<br />
 expect &#8220;:~\$&#8221;<br />
 exit</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=1494#respond' onclick='return addComment.moveForm( "comment-1494", "1494", "respond", "30" )' aria-label='Reply to Michael'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-paulgporter bypostauthor even depth-2 highlander-comment" id="li-comment-1500">
		<article id="comment-1500" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1500"><time pubdate datetime="2014-08-09T10:01:59+00:00">
					August 9, 2014 at 10:01 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Try forcing SSH on your local host to use version 2:</p>
<p>spawn ssh -2 -o StrictHostKeyChecking=no <a href="mailto:example@10.2.3.118">example@10.2.3.118</a></p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=1500#respond' onclick='return addComment.moveForm( "comment-1500", "1500", "respond", "30" )' aria-label='Reply to Paul Gerard Porter'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment odd alt depth-3 highlander-comment" id="li-comment-2113">
		<article id="comment-2113" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/5733a30a9195a73f59bdf1a728357e08?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Michael Cooper</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-2113"><time pubdate datetime="2014-11-13T12:08:02+00:00">
					November 13, 2014 at 12:08 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Hi Paul,</p>
<p>I tried this recommendation and it didn&#8217;t work.  I even tried </p>
<p>spawn ssh -2 -o StrictHostKeyChecking=no $username\@$hostname</p>
<p>This syntax is preferable b/c I&#8217;m using TACACS AAA with an ACS.  This was a working config but I get the following </p>
<p>Password:<br />
Sorry, try again.<br />
Password:</p>
<p>Thanks for your help</p>
<p>Mike</p>
							</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: <a href='http://rowen121.wordpress.com/2014/09/04/cisco-expect-scripting/' rel='external nofollow' class='url'>Cisco Expect Scripting | SnipBits</a></p>
	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1 highlander-comment" id="li-comment-1875">
		<article id="comment-1875" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://0.gravatar.com/avatar/9cea685c13fbc1efcb9c486b1c607568?s=45&#038;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Seb</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1875"><time pubdate datetime="2014-10-01T00:43:11+00:00">
					October 1, 2014 at 12:43 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>hi,<br />
if i use expect on windows platform, can i use this script? and which kind of modification do i made to perform it operational on windows platform&#8230;<br />
modify /usr/bin ?<br />
thanks</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=1875#respond' onclick='return addComment.moveForm( "comment-1875", "1875", "respond", "30" )' aria-label='Reply to Seb'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-sgirard92 odd alt thread-odd thread-alt depth-1 highlander-comment" id="li-comment-1876">
		<article id="comment-1876" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://0.gravatar.com/avatar/9cea685c13fbc1efcb9c486b1c607568?s=45&#038;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">sgirard92</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1876"><time pubdate datetime="2014-10-01T00:46:32+00:00">
					October 1, 2014 at 12:46 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>hi,<br />
i&#8217;ve installed expect on windows platform, does the script is operational on it?<br />
And which kind of modification do i made to perform it operational on windows platform&#8230;<br />
modify the path /usr/bin with c:\&#8230; ?<br />
thanks</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=1876#respond' onclick='return addComment.moveForm( "comment-1876", "1876", "respond", "30" )' aria-label='Reply to sgirard92'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-paulgporter bypostauthor even depth-2 highlander-comment" id="li-comment-1878">
		<article id="comment-1878" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1878"><time pubdate datetime="2014-10-01T10:13:08+00:00">
					October 1, 2014 at 10:13 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Sorry, I know Expect for Windows exists but I have never used it nor tried doing any scripting on a Windows platform before.</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=1878#respond' onclick='return addComment.moveForm( "comment-1878", "1878", "respond", "30" )' aria-label='Reply to Paul Gerard Porter'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment byuser comment-author-thenorthbug odd alt thread-even depth-1 highlander-comment" id="li-comment-1927">
		<article id="comment-1927" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/2a958f8f03151e1083fb76c3e789404e?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://insignifica.wordpress.com' rel='external nofollow' class='url'>thenorthbug</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1927"><time pubdate datetime="2014-10-08T23:42:13+00:00">
					October 8, 2014 at 11:42 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Hey there~</p>
<p>Great post you have there! Just what I needed. However, do you know of any way to extract the configuration changes from a config/text file instead of hard-coding them into the &#8216;send&#8217; commands? The script could be much more useful and flexible if we could do this, instead of having to mod the script everytime it&#8217;s something different.</p>
<p>Btw we have a large amount of devices which depend on radius, and my current solution of them is to use the &#8216;interact&#8217; function to pause so that I can key in my token key. I can&#8217;t think of any better method, but do you have any other suggestions on that as well?</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=1927#respond' onclick='return addComment.moveForm( "comment-1927", "1927", "respond", "30" )' aria-label='Reply to thenorthbug'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-paulgporter bypostauthor even depth-2 highlander-comment" id="li-comment-1929">
		<article id="comment-1929" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/23fac526583c0c3094ebbb5836cf47cb?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://paulgporter.wordpress.com' rel='external nofollow' class='url'>Paul Gerard Porter</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1929"><time pubdate datetime="2014-10-09T09:42:04+00:00">
					October 9, 2014 at 9:42 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Thank you, I am glad you found this post helpful. </p>
<p>I&#8217;m sure there is a way to rewrite this so that you can feed it a file and not have to deal with the &#8220;send&#8221; and &#8220;expect&#8221; commands, but personally I would use python and do a total rewrite. </p>
<p>When it comes to two-factor auth you&#8217;ll have to break the automation one way or another. Here&#8217;s a method I have used in the past:</p>
<p><code> spawn ssh -o StrictHostKeyChecking=no your-username\@$hostname<br />
	expect “ "<br />
	stty -echo<br />
	expect_user -re "(.*)\n"<br />
	send_user "\n"<br />
	stty echo<br />
	set passcode $expect_out(1,string)<br />
	send "$passcode\r"<br />
	expect "#"</code></p>
<p>I doubt it&#8217;s any better than the interact method you are using. This is a situation where using a tool like HP Network Automation and SNMP to push configuration changes would be a real time saver.</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=1929#respond' onclick='return addComment.moveForm( "comment-1929", "1929", "respond", "30" )' aria-label='Reply to Paul Gerard Porter'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	<ul class="children">
	<li class="comment byuser comment-author-thenorthbug odd alt depth-3 highlander-comment" id="li-comment-1933">
		<article id="comment-1933" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://2.gravatar.com/avatar/2a958f8f03151e1083fb76c3e789404e?s=45&#038;d=http%3A%2F%2F2.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn"><a href='http://insignifica.wordpress.com' rel='external nofollow' class='url'>thenorthbug</a></cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-1933"><time pubdate datetime="2014-10-09T19:52:53+00:00">
					October 9, 2014 at 7:52 pm					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Thanks for your swift reply~ Well I&#8217;m actually quite new to scripting too so I&#8217;ll probably stick to bash and expect first till I get better since I have no experience with python at all.</p>
<p>Your method for the two factor authentication works as well, but I&#8217;ll probably stick to the interact since it&#8217;s just 1 line of code.</p>
<p>And as a good news, not sure whether it&#8217;s of benefit to you, but maybe to the rest who reads the comments, I managed to successfulload the configuration from a file!</p>
<p>The slight change in the script is as below:<br />
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-<br />
set configfile [lindex $argv X]<br />
.<br />
. output ommited<br />
.<br />
expect &#8220;*(config)#$&#8221;</p>
<p>set filereader [open $configfile r]<br />
while {[gets $filereader read_line] != -1} {<br />
#    send_user &#8220;Acquired line: $read_line\n&#8221;<br />
    send &#8220;$read_line\n&#8221;<br />
    expect &#8220;*(config*)#$&#8221;<br />
}<br />
close $filereader<br />
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;</p>
<p>I was using the &#8216;send_user&#8217; line just to verify that the file was being read correctly and the lines were acquired properly, it&#8217;s not really needed in the actual function thats why it&#8217;s commented out.</p>
<p>And the (config*)# match is because I had a problem when the config mode entered line or interface configuration where it would display (config-if) or something else instead.</p>
<p>Right now it doesn&#8217;t have any &#8216;error detection&#8217; mechanism but you guys could probably add in your own.</p>
<p>Cheers~</p>
							</div>

			<div class="reply">
							</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1 highlander-comment" id="li-comment-2131">
		<article id="comment-2131" class="comment">
			<footer>
				<div class="comment-author vcard">
					<img alt='' src='http://0.gravatar.com/avatar/cac9eb057c372861ad93ebcf904a94e6?s=45&#038;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D45&#038;r=G' class='avatar avatar-45' height='45' width='45' />					<cite class="fn">Yohnady</cite> <span class="says">says:</span>				</div><!-- .comment-author .vcard -->
				<div class="comment-meta commentmetadata">
					<a href="http://paulgporter.net/2012/12/08/30/comment-page-1/#comment-2131"><time pubdate datetime="2014-11-19T10:36:51+00:00">
					November 19, 2014 at 10:36 am					</time></a>
									</div><!-- .comment-meta .commentmetadata -->
			</footer>

			<div class="comment-content">
				<p>Why I am getting this message? The device-list.txt file is created.</p>
<p>yc@ubuntu:~$ #!/bin/bash<br />
yc@ubuntu:~$  # Collect the current user&#8217;s ssh and enable passwords<br />
yc@ubuntu:~$  echo -n &#8220;Enter the SSH password for $(whoami) &#8221;<br />
Enter the SSH password for yc yc@ubuntu:~$  read -s -e password<br />
yc@ubuntu:~$  echo -n &#8220;Enter the Enable password for $(whoami) &#8221;<br />
Enter the Enable password for yc yc@ubuntu:~$  read -s -e enable<br />
yc@ubuntu:~$ # Feed the expect script a device list &amp; the collected passwords<br />
yc@ubuntu:~$ for device in `cat device-list.txt`; do<br />
&gt;  ./configure-cisco.exp $device $password $enable ;<br />
&gt;  done<br />
cat: device-list.txt: No such file or directory<br />
yc@ubuntu:~$</p>
							</div>

			<div class="reply">
				<a class='comment-reply-link' href='/2012/12/08/30/?replytocom=2131#respond' onclick='return addComment.moveForm( "comment-2131", "2131", "respond", "30" )' aria-label='Reply to Yohnady'>Reply</a>			</div><!-- .reply -->
		</article><!-- #comment-## -->

	</li><!-- #comment-## -->
		</ol>

		
	
	
									<div id="respond" class="comment-respond">
				<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2012/12/08/30/#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://paulgporter.net/wp-comments-post.php" method="post" id="commentform" class="comment-form">
																										


												<input type="hidden" id="highlander_comment_nonce" name="highlander_comment_nonce" value="ffa54737ed" /><input type="hidden" name="_wp_http_referer" value="/2012/12/08/30/" />
<input type="hidden" name="hc_post_as" id="hc_post_as" value="guest" />

<div class="comment-form-field comment-textarea">
	<label for="comment">Enter your comment here...</label>
	<div id="comment-form-comment"><textarea id="comment" name="comment" title="Enter your comment here..."></textarea></div>
</div>

<div id="comment-form-identity">

	<div id="comment-form-nascar">
		<p>Fill in your details below or click an icon to log in:</p>
		<ul>
			<li class="selected" style="display:none;">
				<a href="#comment-form-guest" id="postas-guest" title="Guest">
					<span></span>
				</a>
			</li>
			<li>
				<a href="#comment-form-load-service:WordPress.com" id="postas-wordpress" title="WordPress.com">
					<span></span>
				</a>
			</li>
			<li>
				<a href="#comment-form-load-service:Twitter" id="postas-twitter" title="Twitter">
					<span></span>
				</a>
			</li>
			<li>
				<a href="#comment-form-load-service:Facebook" id="postas-facebook" title="Facebook">
					<span></span>
				</a>
			</li>
			<li>
		</ul>
	</div>

	<div id="comment-form-guest" class="comment-form-service selected">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
<a href="https://gravatar.com/site/signup/" target="_blank">				<img src="http://1.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=25" alt="Gravatar" width="25" class="no-grav" />
</a>			</div>

				<div class="comment-form-fields">
				<div class="comment-form-field comment-form-email">
					<label for="email">Email <span class="required">(required)</span> <span class="nopublish">(Address never made public)</span></label>
					<div class="comment-form-input"><input id="email" name="email" type="email" value="" /></div>
				</div>
				<div class="comment-form-field comment-form-author">
					<label for="author">Name <span class="required">(required)</span></label>
					<div class="comment-form-input"><input id="author" name="author" type="text" value="" /></div>
				</div>
				<div class="comment-form-field comment-form-url">
					<label for="url">Website</label>
					<div class="comment-form-input"><input id="url" name="url" type="text" value="" /></div>
				</div>
			</div>
	
		</div>
	</div>

	<div id="comment-form-wordpress" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="http://s2.wp.com/wp-content/mu-plugins/highlander-comments/images/wplogo.png?m=1391188133g" alt="WordPress.com Logo" width="25" class="no-grav" />
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="wp_avatar" id="wordpress-avatar" class="comment-meta-wordpress" value="" />
				<input type="hidden" name="wp_user_id" id="wordpress-user_id" class="comment-meta-wordpress" value="" />
				<input type="hidden" name="wp_access_token" id="wordpress-access_token" class="comment-meta-wordpress" value="" />
				<p class="comment-form-posting-as pa-wordpress"><strong></strong> You are commenting using your WordPress.com account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( 'wordpress' );">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>

	<div id="comment-form-twitter" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="http://1.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=25" alt="Twitter picture" width="25" class="no-grav" />
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="twitter_avatar" id="twitter-avatar" class="comment-meta-twitter" value="" />
				<input type="hidden" name="twitter_user_id" id="twitter-user_id" class="comment-meta-twitter" value="" />
				<input type="hidden" name="twitter_access_token" id="twitter-access_token" class="comment-meta-twitter" value="" />
				<p class="comment-form-posting-as pa-twitter"><strong></strong> You are commenting using your Twitter account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( 'twitter' );">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>

	<div id="comment-form-facebook" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="http://1.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=25" alt="Facebook photo" width="25" class="no-grav" />
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="fb_avatar" id="facebook-avatar" class="comment-meta-facebook" value="" />
				<input type="hidden" name="fb_user_id" id="facebook-user_id" class="comment-meta-facebook" value="" />
				<input type="hidden" name="fb_access_token" id="facebook-access_token" class="comment-meta-facebook" value="" />
				<p class="comment-form-posting-as pa-facebook"><strong></strong> You are commenting using your Facebook account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( 'facebook' );">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>

	<div id="comment-form-googleplus" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="http://1.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=25" alt="Google+ photo" width="25" class="no-grav" />
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="googleplus_avatar" id="googleplus-avatar" class="comment-meta-googleplus" value="" />
				<input type="hidden" name="googleplus_user_id" id="googleplus-user_id" class="comment-meta-googleplus" value="" />
				<input type="hidden" name="googleplus_access_token" id="googleplus-access_token" class="comment-meta-googleplus" value="" />
				<p class="comment-form-posting-as pa-googleplus"><strong></strong> You are commenting using your Google+ account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( 'googleplus' );">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>


	<div id="comment-form-load-service" class="comment-form-service">
		<div class="comment-form-posting-as-cancel"><a href="javascript:HighlanderComments.cancelExternalWindow();">Cancel</a></div>
		<p>Connecting to %s</p>
	</div>

	
</div>

<script type="text/javascript">
var highlander_expando_javascript = function(){
	var input = document.createElement( 'input' ),
	    comment = jQuery( '#comment' );

	if ( 'placeholder' in input ) {
		comment.attr( 'placeholder', jQuery( '.comment-textarea label' ).remove().text() );
	}

	// Expando Mode: start small, then auto-resize on first click + text length
	jQuery( '#comment-form-identity' ).hide();
	jQuery( '#comment-form-subscribe' ).hide();
	jQuery( '#commentform .form-submit' ).hide();

	comment.css( { 'height':'10px' } ).one( 'focus', function() {
		var timer = setInterval( HighlanderComments.resizeCallback, 10 )
		jQuery( this ).animate( { 'height': HighlanderComments.initialHeight } ).delay( 100 ).queue( function(n) { clearInterval( timer ); HighlanderComments.resizeCallback(); n(); } );
		jQuery( '#comment-form-identity' ).slideDown();
		jQuery( '#comment-form-subscribe' ).slideDown();
		jQuery( '#commentform .form-submit' ).slideDown();
	});
}
jQuery(document).ready( highlander_expando_javascript );
</script>

<div id="comment-form-subscribe">
	<p class="comment-subscription-form"><input type="checkbox" name="subscribe" id="subscribe" value="subscribe" style="width: auto;" tabindex="6"/> <label class="subscribe-label" id="subscribe-label" for="subscribe" style="display: inline;">Notify me of new comments via email.</label></p><p class="post-subscription-form"><input type="checkbox" name="subscribe_blog" id="subscribe_blog" value="subscribe" style="width: auto;" tabindex="7"/> <label class="subscribe-label" id="subscribe-blog-label" for="subscribe_blog"  style="display: inline;">Notify me of new posts via email.</label></p></div>

												<p class="form-submit">
							<input name="submit" type="submit" id="comment-submit" class="submit" value="Post Comment" />
							<input type='hidden' name='comment_post_ID' value='30' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
						</p>
						<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="c4d350c0a9" /></p>
<input type="hidden" name="genseq" value="1417423019" />
<p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="10"/></p>					</form>
							</div><!-- #respond -->
			<div style="clear: both"></div>
</div><!-- #comments -->

			
			</div><!-- #content -->
		</div><!-- #primary -->


<div id="sidebar-wide">
			<div id="secondary" class="widget-area" role="complementary">
			<aside id="search-3" class="widget widget_search"><form role="search" method="get" id="searchform" class="searchform" action="http://paulgporter.net/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s" />
					<input type="submit" id="searchsubmit" value="Search" />
				</div>
			</form></aside><aside id="categories-2" class="widget widget_categories"><h1 class="widget-title">Categories</h1>		<ul>
	<li class="cat-item cat-item-45809"><a href="http://paulgporter.net/category/configuration/" >Configuration</a>
</li>
	<li class="cat-item cat-item-148"><a href="http://paulgporter.net/category/design/" >Design</a>
</li>
	<li class="cat-item cat-item-111949"><a href="http://paulgporter.net/category/monitoring/" >Monitoring</a>
</li>
	<li class="cat-item cat-item-2929"><a href="http://paulgporter.net/category/scripting/" >Scripting</a>
</li>
	<li class="cat-item cat-item-27731"><a href="http://paulgporter.net/category/troubleshooting/" >Troubleshooting</a>
</li>
		</ul>
</aside>		</div><!-- #secondary -->
	
	
	
	</div><!-- #sidebar-wide -->
<div id="sidebar-narrow">
	<div id="senary" class="widget-area" role="complementary">
		<style type="text/css">
#am_thumbnail a {
text-decoration: none;
border: none;
}
#am_thumbnail img {
text-decoration: none;
border: 1px solid #999;
max-width: 99%;
}
#am_name {
margin-top: 5px;
margin-bottom: 3px;
}
#am_headline {
margin-bottom: 5px;
}
#am_bio {
margin-bottom: 15px;
}
#am_bio p {
margin-bottom: 5px;
}
#am_bio p:last-child {
margin-bottom: 0px;
}
#am_services {
margin-right: -5px;
}
#am_services a.am_service_icon {
margin-right: 4px;
text-decoration: none;
border: none;
}
#am_services a.am_service_icon:hover {
text-decoration: none;
border: none;
}
#am_services a.am_service_icon img {
border: none;
margin-bottom: 4px;
}
</style>
<aside id="aboutme_widget-5" class="widget aboutme_widget"><div id="am_thumbnail"><a href="http://about.me/paul_g_porter" target="_blank" rel="me"><img src="http://d13pix9kaak6wt.cloudfront.net/avatar/users/p/a/u/paul_g_porter_1380088794_75.jpg" alt="Paul Gerard Porter"></a></div><div id="am_bio"><p>Paul is a Silicon Valley-based Network Architect with over 17 years of hands-on experience designing and supporting all aspects of IT Infrastructure. He is currently working at Apple as the Sr. Network Engineer for Spotlight Search.</p><p>When not in front of a computer Paul enjoys riding his Honda CRF 450R, practicing Hei Long Shou Shu Kung Fu, and exploring the world around him.</p></div></aside>	</div><!-- #senary -->
</div><!-- #sidebar-narrow -->
	</div><!-- #main -->

	<footer id="colophon" role="contentinfo">
		
<div id="supplementary" class="one">
			<div id="first" class="widget-area" role="complementary">
			<style type="text/css">
#am_thumbnail a {
text-decoration: none;
border: none;
}
#am_thumbnail img {
text-decoration: none;
border: 1px solid #999;
max-width: 99%;
}
#am_name {
margin-top: 5px;
margin-bottom: 3px;
}
#am_headline {
margin-bottom: 5px;
}
#am_bio {
margin-bottom: 15px;
}
#am_bio p {
margin-bottom: 5px;
}
#am_bio p:last-child {
margin-bottom: 0px;
}
#am_services {
margin-right: -5px;
}
#am_services a.am_service_icon {
margin-right: 4px;
text-decoration: none;
border: none;
}
#am_services a.am_service_icon:hover {
text-decoration: none;
border: none;
}
#am_services a.am_service_icon img {
border: none;
margin-bottom: 4px;
}
</style>
<aside id="aboutme_widget-3" class="widget aboutme_widget"><h1 class="widget-title">about.me</h1><h2 id="am_name"><a href="http://about.me/paul_g_porter" style="font-size:medium;" target="_blank" rel="me">Paul Gerard Porter</a></h2><div id="am_bio"><p>Paul is a Silicon Valley-based Network Architect with over 17 years of hands-on experience designing and supporting all aspects of IT Infrastructure. He is currently working at Apple as the Sr. Network Engineer for Spotlight Search.</p><p>When not in front of a computer Paul enjoys riding his Honda CRF 450R, practicing Hei Long Shou Shu Kung Fu, and exploring the world around him.</p></div></aside>		</div><!-- #first -->
	
	
	
	</div><!-- #supplementary -->
		
		<div id="site-generator">
			<a href="https://wordpress.com/?ref=footer_website">Create a free website or blog at WordPress.com</a>.
			<span class="sep"> | </span>
			<a href="https://wordpress.com/themes/newsy/" title="Learn more about this theme">The Newsy Theme</a>. Design by <a href="http://themify.me" rel="designer">Themify</a>.		</div><!-- #site-generator -->
	</footer><!-- #colophon -->
</div><!-- #page -->

<script type='text/javascript' src='//0.gravatar.com/js/gprofiles.js?ver=201449x'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='http://s2.wp.com/wp-content/mu-plugins/gravatar-hovercards/wpgroho.js?m=1380573781g'></script>

	<script>
		//initialize and attach hovercards to all gravatars
		jQuery( document ).ready( function( $ ) {
			if ( typeof Gravatar.init !== "function" ) {
				return;
			}			

			Gravatar.profile_cb = function( hash, id ) {
				WPGroHo.syncProfileData( hash, id );
			};
			Gravatar.my_hash = WPGroHo.my_hash;
			Gravatar.init( 'body', '#wp-admin-bar-my-account' );
		});
	</script>

		<div style="display:none">
	<div class="grofile-hash-map-ca698d962b1e819c0f785536bffb118c">
	</div>
	<div class="grofile-hash-map-23fac526583c0c3094ebbb5836cf47cb">
	</div>
	<div class="grofile-hash-map-4e5b138f749d88b204fe872e33bd6746">
	</div>
	<div class="grofile-hash-map-cf9278dfa26ff4e19be32a3d886e520b">
	</div>
	<div class="grofile-hash-map-63e6ee78545af8f84b89257b02516cea">
	</div>
	<div class="grofile-hash-map-6fb4ac57245fc3c257e21f4238327488">
	</div>
	<div class="grofile-hash-map-ccc2b3b85ed34e2e8cab0607b94dec02">
	</div>
	<div class="grofile-hash-map-21ca5bb1e6fa941a6c8f301dd6d18768">
	</div>
	<div class="grofile-hash-map-b236464a6ebe4d8c987d1b35e2286799">
	</div>
	<div class="grofile-hash-map-5733a30a9195a73f59bdf1a728357e08">
	</div>
	<div class="grofile-hash-map-3d80c095473674d189b13cc34e2b55e3">
	</div>
	<div class="grofile-hash-map-f54d37dfdc0c26cc2dd12b02a0ca1a72">
	</div>
	<div class="grofile-hash-map-27badf57961c3eb0d8d556c66932c9ea">
	</div>
	<div class="grofile-hash-map-8290f13cbea50b88798bf9c1170872af">
	</div>
	<div class="grofile-hash-map-4af4f37fc37e8a915a43ab57f3e29533">
	</div>
	<div class="grofile-hash-map-b57875cdc36894d543afbf24ba7431b9">
	</div>
	<div class="grofile-hash-map-d5a3e55dab2bac0f1bf7a4cab9e0f994">
	</div>
	<div class="grofile-hash-map-2fca1718cc613ab299dd885d45a26ebd">
	</div>
	<div class="grofile-hash-map-57a6223caa06d3cd76b8e52b95e29349">
	</div>
	<div class="grofile-hash-map-95453f25d5e8f9136b3d33449f0388e5">
	</div>
	<div class="grofile-hash-map-530bc40a2b4524c4dc5374e98e11a8d9">
	</div>
	<div class="grofile-hash-map-9c5637e1d5e33704e0527a6534faf052">
	</div>
	<div class="grofile-hash-map-9964d7874f215834e897ff37918f1241">
	</div>
	<div class="grofile-hash-map-700013d3ad9da91aa1a5c36cacbbfaf3">
	</div>
	<div class="grofile-hash-map-1ddd8392570a44ea9cf08127b023b647">
	</div>
	<div class="grofile-hash-map-a8d4f4c3bd300c2302a7eb97894cbb10">
	</div>
	<div class="grofile-hash-map-4d659c91cb7057b8703f0510817d1e7b">
	</div>
	<div class="grofile-hash-map-4bb84ca95d3a93712f5f692a83fab41b">
	</div>
	<div class="grofile-hash-map-9cea685c13fbc1efcb9c486b1c607568">
	</div>
	<div class="grofile-hash-map-9cea685c13fbc1efcb9c486b1c607568">
	</div>
	<div class="grofile-hash-map-2a958f8f03151e1083fb76c3e789404e">
	</div>
	<div class="grofile-hash-map-cac9eb057c372861ad93ebcf904a94e6">
	</div>
	</div>
<script type='text/javascript'>
/* <![CDATA[ */
var HighlanderComments = {"loggingInText":"Logging In\u2026","submittingText":"Posting Comment\u2026","postCommentText":"Post Comment","connectingToText":"Connecting to %s","commentingAsText":"%1$s: You are commenting using your %2$s account.","logoutText":"Log Out","loginText":"Log In","connectURL":"http:\/\/paulgporter.wordpress.com\/public.api\/connect\/?action=request","logoutURL":"https:\/\/paulgporter.wordpress.com\/wp-login.php?action=logout&_wpnonce=230a853f48","homeURL":"http:\/\/paulgporter.net\/","postID":"30","gravDefault":"mystery","enterACommentError":"Please enter a comment","enterEmailError":"Please enter your email address here","invalidEmailError":"Invalid email address","enterAuthorError":"Please enter your name here","gravatarFromEmail":"This picture will show whenever you leave a comment. Click to customize it.","logInToExternalAccount":"Log in to use details from one of these accounts.","change":"Change","changeAccount":"Change Account","comment_registration":"","userIsLoggedIn":"","isJetpack":"0"};
/* ]]> */
</script>
<script type='text/javascript' src='http://s0.wp.com/_static/??/wp-content/js/jquery/jquery.autoresize.js,/wp-content/mu-plugins/highlander-comments/script.js?m=1414003384j'></script>

	<div id="bit" class="loggedout-follow-normal">
		<a class="bsub" href="javascript:void(0)"><span id='bsub-text'>Follow</span></a>
		<div id="bitsubscribe">

					<h3><label for="loggedout-follow-field">Follow &ldquo;Paul Gerard Porter&rdquo;</label></h3>

			<form action="https://subscribe.wordpress.com" method="post" accept-charset="utf-8" id="loggedout-follow">
			<p>Get every new post delivered to your Inbox.</p>

			<p id="loggedout-follow-error" style="display: none;"></p>

			
			<p><input type="email" name="email" value="Enter your email address" onfocus='this.value=(this.value=="Enter your email address") ? "" : this.value;' onblur='this.value=(this.value=="") ? "Enter your email address" : this.value;'  id="loggedout-follow-field"/></p>

			<input type="hidden" name="action" value="subscribe"/>
			<input type="hidden" name="blog_id" value="43635418"/>
			<input type="hidden" name="source" value="http://paulgporter.net/2012/12/08/30/"/>
			<input type="hidden" name="sub-type" value="loggedout-follow"/>

			<input type="hidden" id="_wpnonce" name="_wpnonce" value="0535b72e77" /><input type="hidden" name="_wp_http_referer" value="/2012/12/08/30/" />
			<p id='bsub-subscribe-button'><input type="submit" value="Sign me up" /></p>
			</form>
					<div id='bsub-credit'><a href="https://wordpress.com/?ref=lof">Build a website with WordPress.com</a></a></div>
		</div><!-- #bitsubscribe -->
	</div><!-- #bit -->

	<script type="text/javascript">
		WPCOM_sharing_counts = {"http:\/\/paulgporter.net\/2012\/12\/08\/30\/":30}	</script>
		<script type="text/javascript">
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-twitter' ).on( 'click', function() {
				window.open( jQuery(this).attr( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
				return false;
			});
		});
		</script>
		<script type="text/javascript">
			jQuery( document ).ready( function() {
			    jQuery.getScript( '//platform.linkedin.com/in.js?async=true', function success() {
			        IN.init();
			    });
			});
			jQuery( document.body ).on( 'post-load', function() {
				if ( typeof IN != 'undefined' )
					IN.parse();
			});
			</script>		<script type="text/javascript">
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-facebook' ).on( 'click', function() {
				window.open( jQuery(this).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
		});
		</script>
			<div id="sharing_email" style="display: none;">
		<form action="/2012/12/08/30/" method="post">
			<label for="target_email">Send to Email Address</label>
			<input type="email" name="target_email" id="target_email" value="" />

			
				<label for="source_name">Your Name</label>
				<input type="text" name="source_name" id="source_name" value="" />

				<label for="source_email">Your Email Address</label>
				<input type="email" name="source_email" id="source_email" value="" />

			
			<div class="recaptcha" id="sharing_recaptcha"></div><input type="hidden" name="recaptcha_public_key" id="recaptcha_public_key" value="6LcYW8MSAAAAADBAuEH9yaPcF7lWh11Iq62ZKtoo" />
			<img style="float: right; display: none" class="loading" src="http://s2.wp.com/wp-content/mu-plugins/post-flair/sharing/images/loading.gif?m=1315610318g" alt="loading" width="16" height="16" />
			<input type="submit" value="Send Email" class="sharing_send" />
			<a href="#cancel" class="sharing_cancel">Cancel</a>

			<div class="errors errors-1" style="display: none;">
				Post was not sent - check your email addresses!			</div>

			<div class="errors errors-2" style="display: none;">
				Email check failed, please try again			</div>

			<div class="errors errors-3" style="display: none;">
				Sorry, your blog cannot share posts by email.			</div>
		</form>
	</div>
<script type="text/javascript" src="//platform.tumblr.com/v1/share.js"></script>			<script type="text/javascript">
			  (function() {
			    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
			    po.src = 'https://apis.google.com/js/plusone.js';
			    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
			  })();
			</script>
					<iframe src='http://widgets.wp.com/likes/master.html?ver=20141028#ver=20141028&amp;mp6=1' scrolling='no' id='likes-master' name='likes-master' style='display:none;'></iframe>
		<div id='likes-other-gravatars'><div class="likes-text"><span>%d</span> bloggers like this:</div><ul class="wpl-avatars sd-like-gravatars"></ul></div>
		<script type="text/javascript">
		//<![CDATA[
			var jetpackLikesWidgetQueue = [];
			var jetpackLikesWidgetBatch = [];
			var jetpackLikesMasterReady = false;

			function JetpackLikespostMessage( message, target ) {
				if ( "string" === typeof message ){
					try{
						message = JSON.parse( message );
					}
					catch(e) {
						return;
					}
				}

				pm( {
					target: target,
					type: 'likesMessage',
					data: message,
					origin: '*'
				} );
			}

			function JetpackLikesBatchHandler() {
				var requests = [];
				jQuery( 'div.jetpack-likes-widget-unloaded' ).each( function( i ) {
					if ( jetpackLikesWidgetBatch.indexOf( this.id ) > -1 )
						return;
					jetpackLikesWidgetBatch.push( this.id );
					var regex = /like-(post|comment)-wrapper-(\d+)-(\d+)-(\w+)/;
					var match = regex.exec( this.id );
					if ( ! match || match.length != 5 )
						return;

					var info = {
						blog_id: match[2],
						width:   this.width
					};

					if ( 'post' == match[1] ) {
						info.post_id = match[3];
					} else if ( 'comment' == match[1] ) {
						info.comment_id = match[3];
					}

					info.obj_id = match[4];

					requests.push( info );
				});

				if ( requests.length > 0 ) {
					JetpackLikespostMessage( { event: 'initialBatch', requests: requests }, window.frames['likes-master'] );
				}
			}

			function JetpackLikesMessageListener( event ) {
				if ( "undefined" == typeof event.event )
					return;

				if ( 'masterReady' == event.event ) {
					jQuery( document ).ready( function() {
						jetpackLikesMasterReady = true;

						var stylesData = {
								event: 'injectStyles'
						};

						if ( jQuery( 'iframe.admin-bar-likes-widget' ).length > 0 ) {
							JetpackLikespostMessage( { event: 'adminBarEnabled' }, window.frames[ 'likes-master' ] );

							stylesData.adminBarStyles = {
								background: jQuery( '#wpadminbar .quicklinks li#wp-admin-bar-wpl-like > a' ).css( 'background' ),
								isRtl: ( 'rtl' == jQuery( '#wpadminbar' ).css( 'direction' ) )
							};
						}

						if ( !window.addEventListener )
							jQuery( '#wp-admin-bar-admin-bar-likes-widget' ).hide();

						stylesData.textStyles = {
							color: jQuery( '.sd-text-color').css( 'color' ),
							fontFamily: jQuery( '.sd-text-color' ).css( 'font-family' ),
							fontSize: jQuery( '.sd-text-color' ).css( 'font-size' ),
							direction: jQuery( '.sd-text-color' ).css( 'direction' ),
							fontWeight: jQuery( '.sd-text-color' ).css( 'font-weight' ),
							fontStyle: jQuery( '.sd-text-color' ).css( 'font-style' ),
							textDecoration: jQuery( '.sd-text-color' ).css('text-decoration')
						};

						stylesData.linkStyles = {
							color: jQuery( '.sd-link-color' ).css('color'),
							fontFamily: jQuery( '.sd-link-color' ).css('font-family'),
							fontSize: jQuery( '.sd-link-color' ).css('font-size'),
							textDecoration: jQuery( '.sd-link-color' ).css('text-decoration'),
							fontWeight: jQuery( '.sd-link-color' ).css( 'font-weight' ),
							fontStyle: jQuery( '.sd-link-color' ).css( 'font-style' )
						};

						JetpackLikespostMessage( stylesData, window.frames[ 'likes-master' ] );

						JetpackLikesBatchHandler();

						jQuery( document ).on( 'inview', 'div.jetpack-likes-widget-unloaded', function() {
							jetpackLikesWidgetQueue.push( this.id );
						});
					});
				}

				if ( 'showLikeWidget' == event.event ) {
					jQuery( '#' + event.id + ' .post-likes-widget-placeholder'  ).fadeOut( 'fast', function() {
						jQuery( '#' + event.id + ' .post-likes-widget' ).fadeIn( 'fast', function() {
							JetpackLikespostMessage( { event: 'likeWidgetDisplayed', blog_id: event.blog_id, post_id: event.post_id, obj_id: event.obj_id }, window.frames['likes-master'] );
						});
					});
				}

				if ( 'clickReblogFlair' == event.event ) {
					wpcom_reblog.toggle_reblog_box_flair( event.obj_id );
				}

				if ( 'showOtherGravatars' == event.event ) {
					var $container = jQuery( '#likes-other-gravatars' );
					var $list = $container.find( 'ul' );

					$container.hide();
					$list.html( '' );

					$container.find( '.likes-text span' ).text( event.total );

					jQuery.each( event.likers, function( i, liker ) {
						$list.append( '<li class="' + liker.css_class + '"><a href="' + liker.profile_URL + '" class="wpl-liker" rel="nofollow" target="_parent"><img src="' + liker.avatar_URL + '" alt="' + liker.name + '" width="30" height="30" style="padding-right: 3px;" /></a></li>');
					} );

					var offset = jQuery( "[name='" + event.parent + "']" ).offset();

					$container.css( 'left', offset.left + event.position.left - 10 + 'px' );
					$container.css( 'top', offset.top + event.position.top - 33 + 'px' );

					var rowLength = Math.floor( event.width / 37 );
					var height = ( Math.ceil( event.likers.length / rowLength ) * 37 ) + 13;
					if ( height > 204 ) {
						height = 204;
					}

					$container.css( 'height', height + 'px' );
					$container.css( 'width', rowLength * 37 - 7 + 'px' );

					$list.css( 'width', rowLength * 37 + 'px' );

					$container.fadeIn( 'slow' );

					var scrollbarWidth = $list[0].offsetWidth - $list[0].clientWidth;
					if ( scrollbarWidth > 0 ) {
						$container.width( $container.width() + scrollbarWidth );
						$list.width( $list.width() + scrollbarWidth );
					}
				}
			}

			pm.bind( 'likesMessage', function(e) { JetpackLikesMessageListener(e); } );

			jQuery( document ).click( function( e ) {
				var $container = jQuery( '#likes-other-gravatars' );

				if ( $container.has( e.target ).length === 0 ) {
					$container.fadeOut( 'slow' );
				}
			});

			function JetpackLikesWidgetQueueHandler() {
				var wrapperID;
				if ( ! jetpackLikesMasterReady ) {
					setTimeout( JetpackLikesWidgetQueueHandler, 500 );
					return;
				}

				if ( jetpackLikesWidgetQueue.length > 0 ) {
					// We may have a widget that needs creating now
					var found = false;
					while( jetpackLikesWidgetQueue.length > 0 ) {
						// Grab the first member of the queue that isn't already loading.
						wrapperID = jetpackLikesWidgetQueue.splice( 0, 1 )[0];
						if ( jQuery( '#' + wrapperID ).hasClass( 'jetpack-likes-widget-unloaded' ) ) {
							found = true;
							break;
						}
					}
					if ( ! found ) {
						setTimeout( JetpackLikesWidgetQueueHandler, 500 );
						return;
					}
				} else if ( jQuery( 'div.jetpack-likes-widget-unloaded' ).length > 0 ) {
					// Grab any unloaded widgets for a batch request
					JetpackLikesBatchHandler();

					// Get the next unloaded widget
					wrapperID = jQuery( 'div.jetpack-likes-widget-unloaded' ).first()[0].id;
					if ( ! wrapperID ) {
						// Everything is currently loaded
						setTimeout( JetpackLikesWidgetQueueHandler, 500 );
						return;
					}
				}

				if ( 'undefined' === typeof wrapperID ) {
					setTimeout( JetpackLikesWidgetQueueHandler, 500 );
					return;
				}

				var $wrapper = jQuery( '#' + wrapperID );
				$wrapper.find( 'iframe' ).remove();

				if ( $wrapper.hasClass( 'slim-likes-widget' ) ) {
					$wrapper.find( '.post-likes-widget-placeholder' ).after( "<iframe class='post-likes-widget jetpack-likes-widget' name='" + $wrapper.data( 'name' ) + "' height='22px' width='68px' frameBorder='0' scrolling='no' src='" + $wrapper.data( 'src' ) + "'></iframe>" );
				} else {
					$wrapper.find( '.post-likes-widget-placeholder' ).after( "<iframe class='post-likes-widget jetpack-likes-widget' name='" + $wrapper.data( 'name' ) + "' height='55px' width='100%' frameBorder='0' src='" + $wrapper.data( 'src' ) + "'></iframe>" );
				}

				$wrapper.removeClass( 'jetpack-likes-widget-unloaded' ).addClass( 'jetpack-likes-widget-loading' );

				$wrapper.find( 'iframe' ).load( function( e ) {
					var $iframe = jQuery( e.target );
					$wrapper.removeClass( 'jetpack-likes-widget-loading' ).addClass( 'jetpack-likes-widget-loaded' );

					JetpackLikespostMessage( { event: 'loadLikeWidget', name: $iframe.attr( 'name' ), width: $iframe.width() }, window.frames[ 'likes-master' ] );

					if ( $wrapper.hasClass( 'slim-likes-widget' ) ) {
						$wrapper.find( 'iframe' ).Jetpack( 'resizeable' );
					}
				});
				setTimeout( JetpackLikesWidgetQueueHandler, 250 );
			}
			JetpackLikesWidgetQueueHandler();
		//]]>
		</script>
<script type='text/javascript' src='http://s1.wp.com/wp-content/mu-plugins/akismet-3.0/_inc/form.js?m=1404442431g'></script>
<script type='text/javascript' src='http://s2.wp.com/_static/??-eJzTLy/QTc7PK0nNK9EvyClNz8wr1i+uzCtJrMjITM/IAeKS1CJMEWP94uSizIISoOIM5/yiVL2sYh19yo1yKiotzgjISczMo6aBTonFGUDz7HNtDY0tzc3NjEyNDLMA2rtf4g=='></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?m=1395343499g&amp;ver=3.0.83c";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?m=1363304414g&amp;ver=3.0.83c";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type='text/javascript'>
/* <![CDATA[ */
var JetpackEmojiSettings = {"base_url":"http:\/\/s0.wp.com\/wp-content\/mu-plugins\/emoji\/twemoji\/"};
/* ]]> */
</script>
<script type='text/javascript'>
/* <![CDATA[ */
var recaptcha_options = {"lang":"en"};
/* ]]> */
</script>
<script type='text/javascript' src='http://s1.wp.com/_static/??-eJyNyzEOwjAMheELkVqRKpUOiLNEqSkOcWLFKYXbE4YMTGV6w/892MX4nCqmCkFhwSd5lNcQ9AQtUfJxW1C/zWfmxkxBie+BKXXU/7wZidtKSQE5B4K6/+yhD1jF+Yf5Tx8pyVrNLToqoHdXKK192+nKFzvayc7TPJ7DB5SpYQE='></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="//stats.wp.com/w.js?27" type="text/javascript"></script>
<script type="text/javascript">
_tkq = window._tkq || [];
_tkq.push(['storeContext', {'blog_id':'43635418','blog_tz':'-8','user_lang':'en','blog_lang':'en','user_id':'0'}]);
st_go({'blog':'43635418','v':'wpcom','tz':'-8','user_id':'0','post':'30','subd':'paulgporter'});
ex_go({'crypt':'UE5XaGUuOTlwaD85flAmcm1mcmZsaDhkV11YdWtpP0NsWnVkPS9sL0ViLndld3AlSGN8YmRCSmtFZUthMFFWVHptdXMsP3N1LFZDcl00WEw5QUt4JVBwRV9rR0p3eDhhQytvVHRYZjNtTXhibEZoS3ZXNmU3TEJXfDg4N09BX3lJc2ZTWjlsOC14SCxjVk9yL1dxRWh2TX5VRDd6SDVTREovUyZ4fmsmT2ktbGxRLXo2Mz1BOU1KQSZySU12Tz8vSndIWGlVY08yUEZRbi1PeWlic0NhU1lnYWRbX2oxZG91W01KOVR1dUs5clR3Q3A5MjVxUGFBTXRZdWk9N2k3UEF8UC5vellbM3x4TWpfdC1YcW11XX5SNVlWb3VHUnE5QjQtcWt0ZEE/'});
addLoadEvent(function(){linktracker_init('43635418',30);});
	</script>
<noscript><img src="http://pixel.wp.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script></body>
</html>